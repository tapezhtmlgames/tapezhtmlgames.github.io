(()=>{var st=Object.create,Te=Object.defineProperty,at=Object.getOwnPropertyDescriptor,Ee=Object.getOwnPropertyNames,ut=Object.getPrototypeOf,lt=Object.prototype.hasOwnProperty,ct=(t,e)=>function(){return e||(0,t[Ee(t)[0]])((e={exports:{}}).exports,e),e.exports},ft=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ee(e))!lt.call(t,i)&&i!==r&&Te(t,i,{get:()=>e[i],enumerable:!(n=at(e,i))||n.enumerable});return t},De=(t,e,r)=>(r=t!=null?st(ut(t)):{},ft(e||!t||!t.__esModule?Te(r,"default",{value:t,enumerable:!0}):r,t)),Pe=ct({"coffee/bundle/_react.js"(){var t,e,r,n={}.hasOwnProperty,i=[].slice;window.R||(t={},e=function(o,s){var a;for(a in o)if(n.call(o,a)&&o[a]!==s[a])return!0;for(a in s)if(n.call(s,a)&&!(a in o))return!0;return!1},r={},window.R=function(o,s,a,u){var l,c,p,v,d,g;return a==null&&(a=R),u==null&&(u=""),a[o]?(I.in_dev&&console.warn("Already declared, using existing:",o),a[o]):(s.trigger=function(){var f;f=$(ReactDOM.findDOMNode(this)),R.trigger.apply(R,[f].concat(i.call(arguments)))},s.dispatch=function(){var f;f=$(ReactDOM.findDOMNode(this)),R.dispatch.apply(R,[f].concat(i.call(arguments)))},s.container=function(){return $(ReactDOM.findDOMNode(this))},s.tt=function(f,m){var h;return m==null&&(m=t),(h=I.i18n.fetch_key_sync(f))&&_.isString(h)?h:(r[f]||(r[f]=I.i18n.react_class(f)),React.createElement(r[f],m))},s.t=function(f,m){return I.i18n.fetch_key_sync(f)?I.i18n.t_sync(f,m):(I.i18n.fetch_key(f).done(function(h){return function(){if(h.isMounted())return h.forceUpdate()}}(this)),"\u2026")},c=_.once(function(){return(""+u+o).replace(/[A-Z]/g,"_$&").replace(/\./g,"_").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"").toLowerCase()+"_widget"}),s.enclosing_class_name=c,s.enclose=function(){var f,m,h;return h=arguments[0],f=2<=arguments.length?i.call(arguments,1):[],m=h.component||"div",delete h.component,React.createElement.apply(React,[m,$.extend({},h,{className:classNames(c(),h.className)})].concat(i.call(f)))},s.displayName=""+u+o,s.pure&&(s.shouldComponentUpdate=function(f,m){return e(this.props||t,f)||e(this.state||t,m)}),p=s.getDefaultProps,delete s.getDefaultProps,g=s.propTypes,delete s.propTypes,v=s.getDerivedStateFromError,delete s.getDerivedStateFromError,l=createReactClass(s),p&&(l.defaultProps=p()),g&&(l.propTypes=g),v&&(l.getDerivedStateFromError=v),d=React.createElement.bind(null,l),d.type=l,a[o]=d)},R.scope_event_name=function(o){return"itch:"+o},R.trigger=function(){var o,s,a;return a=arguments[0],s=arguments[1],o=3<=arguments.length?i.call(arguments,2):[],a.trigger(R.scope_event_name(s),i.call(o))},R.dispatch=function(o,s,a){var u,l,c,p;typeof s=="object"&&(a=s,s=!1),u=[],p=function(v,d){return u.push(function(){return o.off(v,d)})};for(l in a)n.call(a,l)&&(c=a[l],s&&(l=s+":"+l),l=R.scope_event_name(l),o.on(l,c),p(l,c));return function(){return u.map(function(v){return v()})}},R.component=function(){return R.apply(null,arguments)},R.is_different=e,R.package=function(o){var s;return s=R[o]||(R[o]=function(a,u){return u.Package=s,R.component(a,u,s,o+".")}),s.component=function(){return s.apply(null,arguments)},s},R.render=function(o,s){var a;return window.ReactDOM?(a=typeof o=="string"?document.querySelector(o):o,ReactDOM.render(s(),a)):I.libs.react.done(function(){return R.render(o,s)})})}}),te,Oe,Le,dt={}.hasOwnProperty,Fe=[].slice;Oe=10,te="inputmemory_keys",Le=1,window.I={get_worker:function(){var t;return t=$.Deferred(),I.get_worker=function(){return t},t.resolve(new Worker("/static/worker.min.js")),t},solve_challenge:function(t){return I.get_worker().then(function(e){var r,n,i;return r=Le++,e.postMessage([r,"solve_challenge",t]),n=$.Deferred(),e.addEventListener("message",i=function(o){return function(s){var a,u,l;if(u=s.data,a=u[0],l=u[1],a===r)return e.removeEventListener("message",i),n.resolve(l)}}(this)),n})},libs:{react:$.Deferred(function(t){if(typeof React!="undefined"&&React!==null)return t.resolve(React)}),selectize:$.Deferred(function(t){var e;if(typeof $!="undefined"&&$!==null&&(e=$.fn)!=null&&e.selectize)return t.resolve($.fn.selectize)}),redactor:$.Deferred(function(t){var e;if(typeof $!="undefined"&&$!==null&&(e=$.fn)!=null&&e.redactor)return t.resolve($.fn.redactor)})},setup_page:function(){return I.setup_register_referrers($(document.body)),_.defer(function(t){return function(){return I.setup_affiliate_code()}}(this))},root_url:function(){var t;return t=null,function(e){return t||(t=$("body").data("host")||"",t!==""&&(t=window.location.protocol+"//"+t,window.location.port&&window.location.port!=="80"&&(t+=":"+window.location.port))),t+"/"+e}}(),page_name:function(){return $(document.body).data("page_name")||"unknown"},sort_keys:function(t){var e,r;return r=[],e=function(n){var i,o,s;o=[];for(i in n)dt.call(n,i)&&(s=n[i],r.push(i),typeof s=="object"?o.push(e(s)):o.push(void 0));return o},e(t),r.sort()},get_csrf:function(){return I._csrf_token||(I._csrf_token=$("meta[name='csrf_token']").attr("value"))},with_csrf:function(t){var e;return t==null&&(t={}),e={csrf_token:I.get_csrf()},typeof t=="string"?t+"&"+$.param(e):$.extend(t,e)},add_params:function(t,e){var r;return r=$.param(e),t.match(/\?/)?t+"&"+r:t+"?"+r},flash:function(t,e){return e==null&&(e="notice"),I.flasher||(I.flasher=new I.Flasher),t.match(/^error:/)&&(t=t.replace(/^error:/,"Error: "),e="error"),I.flasher.show(e,t)},slugify:function(t,e){return t=t.replace(/\s+/g,"-"),t=e!=null&&e.for_tags?t.replace(/[^\w_.-]/g,"").replace(/^[_.-]+/,"").replace(/[_.-]+$/,""):t.replace(/[^\w_-]/g,""),t.toLowerCase()},truncate:function(t,e,r){return e==null&&(e=30),r==null&&(r="..."),t?t.length>e+r.length?""+t.slice(0,e)+r:t:""},number_format:function(t,e,r,n){var i,o,s;return r==null&&(r="."),n==null&&(n=","),isNaN(t)||t===null?"":(t=t.toFixed(~~e),s=t.split("."),o=s[0],i=s[1]?r+s[1]:"",o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+i)},format_bytes:function(){var t;return t=[["gb",Math.pow(1024,3)],["mb",Math.pow(1024,2)],["kb",1024]],function(e){var r,n,i,o,s;for(r=0,i=t.length;r<i;r++)if(s=t[r],n=s[0],o=s[1],e>=o)return""+I.number_format(e/o)+n;return I.number_format(e)+" bytes"}}(),ecommerce_event:function(t){return window.gtag?gtag("event","purchase",t):console.log("purchase event:",t)},event:function(t,e,r,n,i){var o;return i==null&&(i=!0),o={hitType:"event",eventCategory:t,eventAction:e,eventLabel:r,eventValue:n},i||(o.nonInteraction=1),I.event_with_opts(o)},event_with_opts:function(t){try{return window.ga!=null?window.ga("send",t):(console.log("ga event:",t),typeof t.hitCallback=="function"?t.hitCallback():void 0)}catch(e){}},parse_money:function(t){var e;return e=t&&parseInt(t.replace(/[^\d]/g,""),10),e||0},currency_symbols:{USD:"$",GBP:"\xA3",EUR:"\u20AC",JPY:"\xA5"},currency_formats:{USD:{prefix:"$"},GBP:{prefix:"\xA3"},JPY:{prefix:"\xA5"},EUR:{suffix:"\u20AC"}},format_money:function(t,e){var r,n;return e==null&&(e="USD"),t<0?"-"+I.format_money(-t,e):(n=I.currency_symbols[e]||"$",e==="JPY"?n+t:(r=I.number_format(t/100,2),e==="EUR"?""+r+n:""+n+r))},money_input:function(t,e){var r,n;return e==null&&(e={}),t=$(t),r=e.currency||t.data("currency"),n=I.currency_formats[r]||{prefix:"$"},t.maskMoney($.extend({affixesStay:!0,precision:r==="JPY"?0:2},n,e))},plural:function(t,e){return e===1?e+" "+t:e+" "+t+"s"},add_recaptcha_if_necessary:function(t,e){if(e[0]==="recaptcha")return t.data("adding_recaptcha")||(t.data("adding_recaptcha",!0),I.with_recaptcha(function(){var r;return r=t.find(".g-recaptcha"),I.event("recaptcha","show",I.page_name()),grecaptcha.render(r[0],{sitekey:r.data("sitekey")})})),t.set_form_errors(["Please fill out the CAPTCHA to continue"]),!0},with_recaptcha:function(t){var e;return window.grecaptcha?t():I.recaptcha_deferred?I.recaptcha_deferred.done(t):(I.recaptcha_deferred=$.Deferred().done(t),window._itch_recaptcha_loaded=function(){return I.recaptcha_deferred.resolve()},e="https://www.google.com/recaptcha/api.js?onload=_itch_recaptcha_loaded&render=explicit",$('<script type="text/javascript">').attr("src",e).appendTo("head"))},wait_for_object:function(t,e,r){var n,i,o;return i=1,n=10,o=function(){return t[e]?typeof r=="function"?r():void 0:(i+=n,i=Math.min(500,i),setTimeout(o,i))},o()},with_selectize:function(t){return I.libs.selectize.done(t)},get_template:function(t){return _.template($("#"+t+"_tpl").html())},lazy_template:function(t,e){return function(){var r,n;return r=1<=arguments.length?Fe.call(arguments,0):[],n=I.get_template(e),t.prototype.template=n,n.apply(null,r)}},setup_sticky_bar:function(t){var e,r,n;return n=$(window),e=$(document.body),t=$(t),r=!1,n.on("scroll",function(i){if(n.scrollTop()>t.offset().top+t.outerHeight()){if(!r)return e.addClass("show_sticky_bar"),r=!0}else if(r)return e.removeClass("show_sticky_bar"),r=!1})},setup_selectize:function(t){return t.find(".selectize_input").addBack(".selectize_input").each(function(e,r){var n,i,o,s,a,u,l;if(n=$(r),!n.hasClass("selectized"))return a={plugins:[],persist:!1},n.is("select")&&(i={},n.find("option").each(function(c,p){var v;return v=$(p),i[v.val()]=v.data("extra")}),l=function(c,p){var v,d;return v=p(c.text),(d=i[c.value])&&(v=v+" <span class='sub'>\u2014 "+d+"</span>"),"<div class='option'>"+v+"</div>"},a.render={item:l,option:l}),(u=n.data("placeholder"))&&(a.placeholder=u),n.hasClass("dropdown")&&(a.maxItems=1),(s=n.data("options"))&&(n.hasClass("options_object")?(a.options=s,a.searchField=["text","keywords"]):a.options=s.map(function(c){return{value:c[0],text:c[1]}}),a.plugins.push("remove_button"),a.delimiter=",",a.persist=!1),(o=n.data("optgroups"))&&(a.optgroups=o),n.selectize(a)})},format_filesize:function(t,e){var r,n,i,o,s;for(e==null&&(e=".file_size_value"),o=t.find(e),s=[],n=0,i=o.length;n<i;n++)r=o[n],r=$(r),s.push(r.html(I.format_bytes(parseInt(r.html()))));return s},adjust_font_size_to_fit:function(t,e){var r,n,i;if(e==null&&(e=16),!!t.length){for(n=t.css("font-size"),n=parseInt(n.match(/\d+/),10),r=t[0],i=[];r.offsetWidth<r.scrollWidth&&(n-=2,!(n<e));)i.push(t.css("font-size",n+"px"));return i}},slug_input:function(t,e){var r;if(r=/[a-z_0-9_-]/g,t.on("keypress",function(n){var i;if(n.keyCode>=32&&(i=String.fromCharCode(n.keyCode),!i.match(r)))return!1}),e&&e.length)return t.on("change",function(n){var i;if(i=I.slugify(e.val()),t.val().match(/^\s*$/)&&i!=="")return t.val(i)}),e.on("change",function(n){if(t.val().match(/^\s*$/))return t.val(I.slugify($(n.currentTarget).val()))})},deferred_links:function(t,e,r){return r||(r=I.delegate_tracking),t.on("mouseup",e,function(n){var i;if(n.which===2)return i=$(n.currentTarget),r(i,n)}),t.on("click",e,function(n){var i,o,s,a;if(n.which===1&&(a=$(n.currentTarget),o=n.metaKey||n.ctrlKey||n.shiftKey||a.attr("target")==="_blank",i=null,o||(i=function(){if(i)return i=null,window.location=a.attr("href")},setTimeout(function(){return typeof i=="function"?i():void 0},200)),(s=r(a,n))!=null&&s.done(i),!o))return!1})},delegate_tracking:function(t){var e;return e=[],t.trigger("i:delegate_tracking",[function(r){return e.push(r)}]),$.when.apply($,e)},ga_tracker:function(t,e,r,n){var i;return i=function(o){var s,a,u,l,c;return s={hitType:"event",eventCategory:(a=o.data("category"))!=null?a:t,eventAction:(u=o.data("action"))!=null?u:e,eventLabel:(l=o.data("label"))!=null?l:r,eventValue:(c=o.data("value"))!=null?c:n},$.Deferred(function(p){return s.hitCallback=function(){return p.resolve()},I.event_with_opts(s)})}},tracked_links:function(){var t,e,r,n,i,o,s;return r=arguments[0],i=2<=arguments.length?Fe.call(arguments,1):[],e=i[0],t=i[1],n=i[2],s=i[3],o=I.ga_tracker(e,t,n,s),I.deferred_links(r,"a[data-label]",o),r.on("i:track_link",function(a,u){var l;return u&&(l=u[0]),I.ga_tracker(e,t,l!=null?l:n,s)($(a.target))})},set_cookie:function(t,e,r){return r==null&&(r={}),I.in_dev&&console.log("set cookie:",[t,e],r),Cookies.set(t,e,$.extend({path:"/",domain:"."+$(document.body).data("host")},r))},set_register_referrer:function(t){var e;if(e=I.page_name(),e!=null&&I.set_cookie("ref:register:page_params",e),t!=null)return I.set_cookie("ref:register:action",t)},setup_register_referrers:function(t){if(!I.current_user)return t.on("mouseup","[data-register_action]",function(e){var r;return r=$(e.currentTarget).data("register_action"),I.set_register_referrer(r)})},setup_affiliate_code:function(t,e){var r,n;if(e==null&&(e=!1),t==null&&(t=(n=window.location.search.match(/\bac=([\w\d]+(?:\-[\.:_\w\d]+)?)/))!=null?n[1]:void 0),!!t&&!(!e&&t===Cookies.get("acode")))return I.set_cookie("acode",t,{expires:1}),document.referrer&&I.set_cookie("acode:ref",document.referrer.substring(0,180),{expires:1}),r=window.location.href.replace(/\?.*$/,"").substring(0,180),I.set_cookie("acode:land",r,{expires:1})},bind_checkbox_to_input:function(t,e,r){var n;return n=function(){var i;return i=t.prop("checked"),e.prop("disabled",i),typeof r=="function"?r(i):void 0},t.on("change",n),n()},add_facebook:function(t){var e,r,n;if(!window.FB&&(I.add_facebook=function(){},$('<div id="fb-root"></div>').appendTo(document.body),r="facebook-jssdk",!document.getElementById(r)))return t!=null&&(window.fbAsyncInit=t),e=document.getElementsByTagName("script")[0],n=document.createElement("script"),n.id=r,n.src="//connect.facebook.net/en_GB/sdk.js#xfbml=1&appId=537395183072744&version=v2.0",e.parentNode.insertBefore(n,e)},add_twitter:function(){var t,e,r;if(e="twitter-wjs",!document.getElementById(e))return I.add_twitter=function(){},t=document.getElementsByTagName("script")[0],r=document.createElement("script"),r.id="twitter-wjs",r.src="//platform.twitter.com/widgets.js",t.parentNode.insertBefore(r,t)},add_react:function(){var t,e;return t=$.Deferred(),window.ReactDOM?(t.resolve(),t):(I.add_react=function(){return t},I.libs.react.done(function(){return t.resolve()}),e=$("#lib_react_src"),e.replaceWith($('<script type="text/javascript">').attr("src",e.data("src"))),t)},has_follow_button:function(t,e){var r,n,i,o,s,a,u;return e==null&&(e={}),t=$(t),i=(s=e.cls)!=null?s:"follow_button_widget",r=(a=e.animate_follow)!=null?a:"animate_bounce",n=(u=e.animate_unfollow)!=null?u:"animate_drop_down",o={},o[i]=function(l){var c,p,v,d;if(!I.current_user)return"continue";if(!l.is(".loading"))return l.removeClass(r+" "+n),v=$.Deferred(function(g){return setTimeout(function(){return g.resolve()},500)}),p=l.is(".is_following"),d=p?(_.defer(function(){return l.addClass(n)}),l.data("unfollow_url")):(_.defer(function(){return l.addClass(r)}),l.data("follow_url")),l.addClass("loading").trigger("i:track_link",["follow_btn"]),c=l.data("follow_data")||{},$.when($.post(d,I.with_csrf(c)),v).done(function(g){var f;if(f=g[0],l.removeClass("loading "+r+" "+n),f.errors){I.flash(f.errors.join(", "));return}return l.toggleClass("is_following",f.following).trigger("i:follow_updated",[{user_id:l.data("user_id"),following:f.following,btn:l}])})},t.dispatch("click",o),$(document.body).on("i:follow_updated",function(l,c){var p,v,d;return d=c.user_id,v=c.following,p=c.btn,t.find("."+i+"[data-user_id="+d+"]").not(p).toggleClass("is_following",v)})},is_mobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},is_firefox:function(){var t;return t=navigator.userAgent,t.match(/Firefox/)&&!t.match(/Seamonkey/)},is_safari:function(){var t;return t=navigator.userAgent,t.match(/Safari/)&&!t.match(/Chrome|Chromium|Android|Edge/)},is_ios:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},strip_css:function(t){return t.replace(/<\s*\/\s*style\s*>/i,"")},request_fullscreen:function(t,e){var r,n,i;return r=t.requestFullscreen?(t.requestFullscreen(),!0):t.msRequestFullscreen?(t.msRequestFullscreen(),!0):t.mozRequestFullScreen?(t.mozRequestFullScreen(),!0):t.webkitRequestFullscreen?(t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),!0):!1,r&&e&&(n=window.screen)!=null&&(i=n.orientation)!=null&&typeof i.lock=="function"&&i.lock(e),r},is_fullscreen:function(){return!(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement)},exit_fullscreen:function(){if(document.exitFullscreen)return document.exitFullscreen();if(document.msExitFullscreen)return document.msExitFullscreen();if(document.mozCancelFullScreen)return document.mozCancelFullScreen();if(document.webkitExitFullscreen)return document.webkitExitFullscreen()},toggle_fullscreen:function(t,e){return I.is_fullscreen()?(I.exit_fullscreen(),!1):I.request_fullscreen(t,e)?!0:"failed"},setup_dirty_warning:function(t,e){return e||(e=function(){return t.data("dirty")}),t.data("dirty",!1),$(window).on("beforeunload",function(){var r;if(r=e(),!!r)switch(typeof r){case"string":return r;default:return"You've made modifications to this page."}}),t.on("i:after_submit",function(){return t.data("dirty",!1)}),_.defer(function(){return t.on("change","input, select, textarea",function(r){return t.data("dirty",!0)}),t.on("keydown, mousedown",".redactor-editor",function(){return t.data("dirty",!0)})})},remote_submit:function(t,e,r){var n,i;return r==null&&(r={}),t.trigger("i:before_submit"),r.loading_lock&&(i=t.serializeArray(),n=t.addClass("loading").find("button, input[type='submit']").prop("disabled",!0).addClass("disabled")),$.when(e).then(function(o){var s;return i||(i=t.serializeArray()),o&&(i=i.concat(o)),$.ajax({data:i,type:(s=t.attr("method"))!=null?s:"POST",dataType:"json",url:t.attr("action"),xhrFields:{withCredentials:!0},error:function(a){var u;return u=function(){try{return JSON.parse(a.responseText)}catch(l){}}(),u!=null&&u.errors?I.flash(u.errors.join(", ")):I.flash("We seem to be having server problems right now! Please try again later.")},complete:function(){return r.loading_lock&&(n.prop("disabled",!1).removeClass("disabled"),t.removeClass("loading")),t.trigger("i:after_submit")}}).then(null,function(a){try{return JSON.parse(a.responseText)}catch(u){throw a}})})},is_middle_click:function(t){return t.which===2||t.metaKey||t.ctrlKey},escape_regex:function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},move:function(t,e,r){var n,i,o,s;if(i=t.indexOf(e),i===-1)throw"Failed to find object in array";if(s=i+r,s<0||s>=t.length)throw"Movement is outside of array ("+s+") [0, "+(t.length-1)+"]";return n=function(){var a,u,l;for(l=[],a=0,u=t.length;a<u;a++)o=t[a],o!==e&&l.push(o);return l}(),n.splice(s,0,e),n},format_integer:function(t){return t>1e7?Math.floor(t/1e6)+"m":t>=1e6?Math.floor(t/1e5)/10+"m":t>1e4?Math.floor(t/1e3)+"k":t>=1e3?Math.floor(t/100)/10+"k":""+t},store_memory:function(t,e){var r,n,i,o;if(window.localStorage){if(i=function(){try{return JSON.parse(localStorage.getItem(te))}catch(s){}}(),i||(i=[]),i[0]!==t){for(n=function(){var s,a,u;for(u=[],s=0,a=i.length;s<a;s++)r=i[s],t!==r&&u.push(r);return u}(),i=[t].concat(n);i.length>Oe;)o=i.pop(),typeof localStorage!="undefined"&&localStorage!==null&&localStorage.removeItem(o);localStorage.setItem(te,JSON.stringify(i))}return localStorage.setItem(t,e)}},clear_memory:function(t){var e,r;if(window.localStorage){r=function(){try{return JSON.parse(localStorage.getItem(te))}catch(n){}}(),r&&localStorage.setItem(te,JSON.stringify(function(){var n,i,o;for(o=[],n=0,i=r.length;n<i;n++)e=r[n],t!==e&&o.push(e);return o}()));try{return localStorage.removeItem(t)}catch(n){}}}},$(function(){var t;if((t=window.location.hash.match(/\bflash=([^&]*)/))&&(I.flash(t[1]),window.location.hash=window.location.hash.replace(/\bflash=([^&]*)/,"")),I.ie)return $(document.body).addClass("ie")}),I.Flasher=function(){t.prototype.duration=1e4,t.prototype.animation_duration=250,t.prototype.clipping="-7px";function t(){$(document).on("click",".global_flash",function(e){return function(){return e.dismiss()}}(this))}return t.prototype.dismiss=function(){var e;if(e=this.current_flash)return this.timeout&&(clearTimeout(this.timeout),this.timeout=null),e.css({"margin-top":"-"+(e.outerHeight()+4)+"px"}),setTimeout(function(r){return function(){return e.remove()}}(this),this.animation_duration*2)},t.prototype.show=function(e,r){var n;return this.dismiss(),n=$("<div class='global_flash "+e+"' role='alert' aria-live='polite'>").text(r).appendTo("body"),n.css({"margin-left":"-"+n.width()/2+"px","margin-top":"-"+(n.outerHeight()+4)+"px"}),this.timeout=setTimeout(function(i){return function(){return n.addClass("animated"),n.css({"margin-top":i.clipping}),setTimeout(function(){return i.dismiss()},i.duration)}}(this),100),this.current_flash=n},t}(),_.templateSettings={escape:/\{\{(?![&])(.+?)\}\}/g,interpolate:/\{\{&(.+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g},$.easing.smoothstep=function(t){return t*t*t*(t*(t*6-15)+10)};var oe,me,Y,qe,ge,ve,se,Ae,U,Ge=[].slice,We={}.hasOwnProperty;U={},se={},oe="en",Y=(Ae=window.itchio_locale)!=null?Ae:oe,qe=window.requestAnimationFrame||_.defer,ge=function(t,e,r){var n,i,o,s,a,u,l;for(o=0,s=e.length;o<s;o++)if(a=e[o],_.isString(a))t.push(a);else if(a[0]==="v")l=r[a[1]],l||console.warn("i18n: failed to find value for variable "+a[1]),t.push(l);else if(a[0]==="t"){if(i=r[a[1]],typeof i!="function")throw new Error("i18n: tried to interpolate tag without function: "+a[1]);n=a[2],u=[],ge(u,n||[],r),t.push(i(u.join("")))}else throw new Error("i18n: unknown interpolation node: "+JSON.stringify(a));return t},ve=function(t,e){var r,n,i,o;return _.isString(t)?t:(n=function(){var s,a,u;for(u=[],s=0,a=t.length;s<a;s++)if(i=t[s],_.isString(i))u.push(i);else if(i[0]==="v")o=e[i[1]],o||console.warn("i18n: failed to find value for variable "+i[1]),u.push(o);else if(i[0]==="t"){if(r=e[i[1]],typeof r!="function")throw new Error("i18n: tried to interpolate tag without function: "+i[1]);u.push(r(ve(i[2],e)))}else throw new Error("i18n: unknown interpolation node: "+JSON.stringify(i));return u}(),n.length>1?React.createElement.apply(React,[React.Fragment,{}].concat(Ge.call(n))):n.length===0?null:n)},me=function(){t._cache={},t.for_locale=function(e){var r;return(r=this._cache)[e]||(r[e]=new t(e))};function t(e){this.locale=e,this.last_fetch=null,this.next_fetch=null}return t.prototype.fetch=function(e,r){return this.next_fetch?(this.next_fetch=this.next_fetch.concat(e),this.last_fetch):(this.next_fetch=e,this.last_fetch=$.Deferred(function(n){return function(i){return qe(function(){var o,s;if(!window.itchio_translations_url){console.error("missing translations url: itchio_translations_url");return}return o=n.next_fetch,s=$.get(window.itchio_translations_url,{locale:n.locale,prefixes:n.next_fetch.join(",")}),n.next_fetch=null,s.done(function(a){var u,l;for(u in a)We.call(a,u)&&(l=a[u],!r[u]&&(r[u]=l));return i.resolve()})})}}(this)))},t}(),I.i18n={Preloader:me,get_translations:function(){return U},get_cache:function(){return se},get_locale:function(){return Y},locale_is_english:function(){return Y==="en"},insert:function(t){var e,r,n;r=[];for(e in t)We.call(t,e)&&(n=t[e],!U[e]&&r.push(U[e]=n));return r},set_locale:function(t){return Y=t,U={},se={}},render_string:function(t,e,r){var n;if(_.isString(e))return r&&console.warn("i18n: provided variables to translation string with no interpolation: "+t),e;if(n=[],!r)throw new Error("i18n: tried to interpolate "+t+" without variables");return ge(n,e,r),n.join("")},t:function(t,e){return I.i18n.fetch_key(t).then(function(r){return function(n){return I.i18n.render_string(t,n,e)}}(this))},t_sync:function(t,e){var r;if(r=I.i18n.fetch_key_sync(t),!r)throw new Error("i18n: failed to fetch key sync: "+t);return I.i18n.render_string(t,r,e)},fetch_key_sync:function(t){return Y==="debug"?"[["+t+"]]":U[t]},fetch_key:function(t){var e,r;if(Y==="debug")return $.when("[["+t+"]]");if(e=t.split("."),e.pop(),!e.length)throw new Error("i18n: empty prefix");return r=e.join("."),I.i18n.preload(r).then(function(n){return function(){var i;if(i=U[t],i)return i;if(Y===oe)throw new Error("i18n: failed to find key: "+t);return I.i18n.preload(r,oe).then(function(){if(i=U[t],!i)throw new Error("i18n: failed to find key: "+t);return i})}}(this))},preload:function(t,e){var r,n,i,o,s,a,u;if(e==null&&(e=Y),e!=="debug"){if(r=se,_.isString(t)&&(t=[t]),u=function(){var l,c,p;for(p=[],l=0,c=t.length;l<c;l++)a=t[l],r[e]||(r[e]={}),!r[e][a]&&p.push(a);return p}(),n=function(){var l,c,p,v;for(v=[],l=0,c=t.length;l<c;l++)a=t[l],((p=r[e][a])!=null?p.state():void 0)==="pending"&&v.push(r[e][a]);return v}(),!u.length)return $.when.apply($,n);for(i=me.for_locale(e).fetch(u,U),o=0,s=u.length;o<s;o++)a=u[o],r[e][a]||(r[e][a]=i);return n.length?$.when.apply($,[i].concat(Ge.call(n))):i}},react_class:function(t){return createReactClass({displayName:"i18n:"+t,getInitialState:function(){var e;return e=function(){var r;return(r=I.i18n.fetch_key_sync(t))?{text:r}:null},e.isReactClassApproved=!0,e}(),componentWillUnmount:function(){return this.unmounted=!0},componentDidMount:function(){if(!(this.state&&this.state.text))return I.i18n.fetch_key(t).done(function(e){return function(r){if(!e.unmounted)return e.setState({text:r})}}(this))},render:function(){return this.state?_.isString(this.state.text)?this.state.text:ve(this.state.text,this.props):"\u2026"}})}};var Zt=De(Pe());$.fn.dispatch=function(t,e){return this.on(t,function(r){return function(n){var i,o,s,a;for(s in e)if(o=e[s],i=$(n.target).closest("."+s),!!i.length)return i.is(".disabled")?!1:i.is("a")&&n.ctrlKey||(a=o(i,n),a==="continue")?void 0:!1;return null}}(this)),this};var Be;I.support_passive_scroll=function(){var t,e;e=!1;try{t=Object.defineProperty({},"passive",{get:function(r){return function(){return e=!0}}(this)}),window.addEventListener("test",null,t)}catch(r){}return e},I.support_intersection_observer=function(){return"IntersectionObserver"in window},Be=function(t,e){var r,n,i,o,s,a,u,l;for(t.removeClass("lazy_images"),n=t.find("[data-background_image]").addBack("[data-background_image]"),o=function(){var c,p,v;for(v=[],c=0,p=n.length;c<p;c++)r=n[c],v.push(function(d){var g;if(d=$(d),g=d.data("background_image"),d.css({backgroundImage:"url("+g+")"}),e)return $.Deferred(function(f){return function(m){return $("<img />").attr("src",g).on("load",function(){return m.resolve()})}}(this))}(r));return v}(),l=t.find("img[data-lazy_src]").addBack("img[data-lazy_src]"),i=function(c){var p,v;if(c=$(c),p=c.data("lazy_src"),c.attr("src",p),(v=c.data("lazy_srcset"))&&c.attr("srcset",v),e)return $.Deferred(function(d){return function(g){return c.on("load",function(){return g.resolve()})}}(this))},a=0,u=l.length;a<u;a++)s=l[a],i(s);if(e)return o.length===1?o[0]:$.when.apply($,o)},$.fn.lazy_images=function(t){var e,r,n,i,o,s,a,u,l,c,p,v,d,g,f,m;if(p=this.data("lazy_images"))return p();if(u=t!=null&&t.elements?function(){var h,y,b,x;for(b=t.elements,x=[],h=0,y=b.length;h<y;h++)n=b[h],x.push($(n));return x}():(v=(t!=null?t.selector:void 0)||".lazy_images",function(){var h,y,b,x;for(b=this.find(v),x=[],h=0,y=b.length;h<y;h++)n=b[h],x.push($(n));return x}.call(this)),e=(c=t!=null?t.show_images:void 0)!=null?c:Be,I.support_intersection_observer()){for(i=function(h){var y,b,x,N,M,j;for(j=[],x=0,N=h.length;x<N;x++)b=h[x],b.isIntersecting?(n=b.target,s.unobserve(n),n=$(n),M=t!=null?t.show_item:void 0,y=e(n,!!M),j.push(typeof M=="function"?M(n,y):void 0)):j.push(void 0);return j},s=new IntersectionObserver(i,{}),a=0,l=u.length;a<l;a++)n=u[a],s.observe(n[0]);return function(){return s.disconnect()}}return m=$(window),d=t!=null?t.target:void 0,o=t!=null?t.horizontal:void 0,f=null,r=function(h){return function(){var y,b,x,N,M,j,J,W,S;for(y=function(){if(d){if(o)return d.outerWidth()+d.position().left;throw new Error("not yet")}else return m.scrollTop()+m.height()}(),x=0,N=j=0,J=u.length;j<J;N=++j)if(M=u[N],!!M){if(!document.body.contains(M[0])){u[N]=null,x+=1;continue}S=function(){if(d){if(o)return M.position().left;throw new Error("not yet")}else return M.offset().top}(),M[0].offsetParent&&S<y&&(W=t!=null?t.show_item:void 0,b=e(M,!!W),typeof W=="function"&&W(M,b),x+=1,u[N]=null)}if(x>0)return u=function(){var C,T,D;for(D=[],C=0,T=u.length;C<T;C++)n=u[C],n&&D.push(n);return D}()}}(this),g=_.throttle(r,100),d?(d.on("scroll",g),m.on("resize",g),f=function(){return d.off("scroll",g),m.off("resize","throttled")}):I.support_passive_scroll()?(window.addEventListener("scroll",g,{passive:!0}),m.on("resize i:reshape",g),f=function(){return window.removeEventListener("scroll",g,{passive:!0}),m.off("resize",g)}):(m.on("scroll resize i:reshape",g),f=function(){return m.off("scroll resize i:reshape",g)}),this.data("lazy_images",function(h){return function(){return u=t!=null&&t.elements?function(){var y,b,x,N;for(x=t.elements,N=[],y=0,b=x.length;y<b;y++)n=x[y],N.push($(n));return N}():(v=(t!=null?t.selector:void 0)||".lazy_images",function(){var y,b,x,N;for(x=this.find(v),N=[],y=0,b=x.length;y<b;y++)n=x[y],N.push($(n));return N}.call(h)),r()}}(this)),r(),f},$.fn.exists=function(){return this.length>0?this:!1},$.fn.remote_submit=function(t,e,r){var n;return n=null,this.on("click","button[name], input[type='submit'][name]",function(i){return function(o){var s;return s=$(o.currentTarget),n!=null&&n.remove(),n=$("<input type='hidden' />").attr("name",s.attr("name")).val(s.attr("value")).prependTo(i)}}(this)),this.on("submit",function(i){return function(o,s){var a;if(o.preventDefault(),a=$(o.currentTarget),!(e&&!(typeof e=="function"&&e(a))))return I.remote_submit(a,r,{loading_lock:!0}).done(function(u){return a.data("dirty",!1),s!=null?s(u,a):t(u,a)}),null}}(this))},$.fn.set_form_errors=function(t,e,r){var n,i,o,s,a,u,l,c;if(e==null&&(e=!0),r==null&&(r="Errors"),this.find(".form_errors").remove(),a=!!(t!=null&&t.length),this.toggleClass("has_errors",a),a){for(o=$(_.template(`<div class="form_errors">
  <div>{{ msg }}:</div>
  <ul></ul>
</div>`)({msg:r})),s=o.find("ul"),u=0,l=t.length;u<l;u++)i=t[u],s.append($("<li></li>").text(i));this.prepend(o),e&&(c=this.closest(".lightbox"),c.length||this.offset().top>$(window).height()/2?typeof(n=this[0]).scrollIntoView=="function"&&n.scrollIntoView():$("html, body").animate({scrollTop:0},"fast"))}return this},$.fn.has_tooltips=function(t){var e,r,n,i,o,s;if(t==null&&(t={}),!I.is_mobile())return o=function(){var a;return a=$('<div class="tooltip_drop"></div>'),$(document.body).append(a),o=function(){return a},a},s=_.template('<div class="tooltip">{{ label }}</div>'),i=function(a,u){var l,c,p,v;return u==null&&(u=!1),l=a.data("tooltip_el"),l||(l=$(s({label:a.attr("aria-label")||a.data("tooltip")})),a.data("tooltip_el",l)),l.removeClass("visible"),o().empty().append(l),p=a.offset(),c=l.outerHeight(),v=l.outerWidth(),l.css({position:"absolute",top:t.below?p.top+a.outerHeight()+10:p.top-c-10,left:Math.floor(p.left+(a.outerWidth()-v)/2)}),l.toggleClass("below",!!t.below),u?l.addClass("visible"):setTimeout(function(d){return function(){return l.addClass("visible")}}(this),10)},r=function(a){return function(u){var l,c;if(c=$(u.currentTarget),l=c.data("tooltip_el"),c.removeData("tooltip_el"),!!l&&l.is(":visible"))return i(c,!0)}}(this),n=function(a){return function(u){var l;if(l=$(u.currentTarget),!l.closest(".redactor-box").length)return i(l)}}(this),e=function(a){return function(u){var l,c;if(c=$(u.currentTarget),l=c.data("tooltip_el"))return l.remove()}}(this),this.is("[data-tooltip]")?(this.on("i:refresh_tooltip",r),this.on("mouseenter focus",n),this.on("mouseleave blur i:hide_tooltip",e)):(this.on("i:refresh_tooltip","[data-tooltip], [aria-label]",r),this.on("i:clear_tooltips",function(){return o().empty()}),this.on("mouseenter focus","[data-tooltip], [aria-label]",n),this.on("mouseleave blur i:hide_tooltip","[data-tooltip], [aria-label]",e)),this};var Q,re=Q=window.dayjs;window._dayjs_setup||(Q.extend(window.dayjs_plugin_duration),Q.extend(window.dayjs_plugin_calendar),Q.extend(window.dayjs_plugin_advancedFormat),Q.extend(window.dayjs_plugin_relativeTime),Q.extend(window.dayjs_plugin_utc),window._dayjs_setup=!0);var we,ht=[].slice;we=function(t){var e;return(e=typeof t=="string"&&t.match(/(^\d{4}\-\d{1,2}\-\d{1,2}) (\d{1,2}:\d{1,2}:\d{1,2})$/))?e[1]+"T"+e[2]+"Z":t};var _t=function(t){return re(we(t)).toDate()},Ue=function(){var t,e,r,n;switch(n=arguments[0],e=arguments[1],t=3<=arguments.length?ht.call(arguments,2):[],e==null&&(e="fromNow"),n=we(n),e){case"fromNow":return re(n).fromNow();case"calendar":return re(n).calendar(null,{sameElse:"MMMM Do YYYY"});case"format":return(r=re(n)).format.apply(r,t);default:throw new Error("unknown method for format_timestamp: "+e)}};$.fn.format_timestamps=function(t){var e,r,n,i,o;for(t==null&&(t="calendar"),o=this.find(".date_format"),r=function(s){var a,u,l;return a=s.data("format"),u=s.html(),l=a?Ue(u,"format",a):Ue(u,t),s.html(l).attr("title",u+" UTC")},n=0,i=o.length;n<i;n++)e=o[n],r($(e));return this},$.fn.on_first_view=function(t,e){var r,n,i,o,s,a;if(e==null&&(e={}),window.IntersectionObserver==null){console.warn("IntersectionObserver is not supported by this browser.");return}for(o=new IntersectionObserver(function(u){return function(l){return l.forEach(function(c){if(c.isIntersecting)return o.unobserve(c.target),typeof t=="function"?t(c.target):void 0})}}(this)),s=this,a=[],n=0,i=s.length;n<i;n++)r=s[n],a.push(o.observe(r));return a};var z=window.I,k=window.React,pt=window.ReactDOM,O=window.ReactDOMFactories,mt=window.ReactTransitionGroup,E=window.PropTypes,L=window.classNames,P=window.R;k||z.libs.react.done(function(){return k=window.React,pt=window.ReactDOM,O=window.ReactDOMFactories,mt=window.ReactTransitionGroup,E=window.PropTypes,L=window.classNames,P=window.R});var B=window._,be=[].slice,F=z.ConversionTracker||(z.ConversionTracker=function(){function t(){}return t.types={impression:1,click:2,purchase:3,download:4,join:5},t.buffer=[],t.find_click=function(e){var r,n,i,o,s,a;for(a=new RegExp(":"+e+"$"),r=this.get_cookie(),i=0,s=r.length;i<s;i++)if(o=r[i],n=B.isArray(o)?o[0]:o,n.match(a))return o},t.strip_click=function(e){var r,n,i,o,s,a;return s=new RegExp(":"+e+"$"),r=this.get_cookie(),a=0,o=function(){var u,l,c;for(c=[],u=0,l=r.length;u<l;u++){if(i=r[u],n=B.isArray(i)?i[0]:i,n.match(s)){a+=1;continue}c.push(i)}return c}(),o.length===r.length?0:(this.write_cookie(o),a)},t.after_click_action=function(e,r){var n,i,o,s;if(n=this.find_click(r),!!n)return s=null,o=B.isArray(n)?(s=n[1],n[0]):n,i=o.replace(/^\d+/,this.types[e]),this.strip_click(r),this.push(i,s),!0},t.download=function(e){return this.after_click_action("download",e)},t.purchase=function(e){return this.after_click_action("purchase",e)},t.join=function(e){return this.after_click_action("join",e)},t.click=function(e){var r,n,i,o,s,a;i=this.types.click+":"+e,o=(a=this.get_active_splits())?[i,a]:i,this.push(i);try{for(n=function(){var u,l,c,p;for(c=this.get_cookie(),p=[],u=0,l=c.length;u<l;u++)r=c[u],s=B.isArray(r)?r[0]:r,s!==i&&p.push(r);return p}.call(this),n.push(o);n.length>100;)n.shift();return this.write_cookie(n),!0}catch(u){}},t.write_cookie=function(e){return z.set_cookie("itchio_ca",JSON.stringify(e),{expires:1})},t.get_cookie=function(){var e;if(e=window.Cookies.get("itchio_ca"),e)try{return JSON.parse(e)||[]}catch(r){try{return JSON.parse(decodeURIComponent(e))||[]}catch(n){return[]}}else return[]},t.flush_later=function(){return this.flush_later=B.throttle(this.flush_now,2e3,{leading:!1}),$(window).on("beforeunload",function(e){return function(){e.flush_now()}}(this)),this.flush_later()},t.encode_buffer=function(e){var r,n,i,o,s,a,u,l,c,p,v,d,g,f,m;for(e==null&&(e=be.call(this.buffer)),e.sort(),v=[],u=null,a=null,s=null,i=0,l=e.length;i<l;i++)n=e[i],g=n.match(/^(\d+):(\d+):(\d+):(\d+)$/),r=g[0],m=g[1],f=g[2],p=g[3],c=g[4],m&&(m!==u&&(v.push("t"+m),u=m),f!==a&&(v.push("s"+f),a=f),p!==s&&(v.push("o"+p),s=p),o=(+c).toString(36),d=String.fromCharCode("A".charCodeAt(0)+o.length),v.push(""+d+o));return v.join("")},t.get_active_splits=function(){return z.active_splits},t.flush_url=function(e){var r,n,i;return i=this.encode_buffer(),r=[{name:"x",value:i}],(n=e||this.get_active_splits())&&r.push({name:"s",value:n.join(",")}),z.root_url("ca.gif")+"?"+$.param(r)},t.flush_now_beacon=function(e){var r;if(navigator.sendBeacon==null)return this.flush_now(e);if(this.buffer.length)if(z.in_dev&&console.debug.apply(console,["ca(beacon)"].concat(be.call(B.compact([this.buffer,e])))),r=this.flush_url(e),navigator.sendBeacon(r))this.buffer=[];else return this.flush_now();return $.when()},t.flush_now=function(e){var r;return this.buffer.length?(z.in_dev&&console.debug.apply(console,["ca"].concat(be.call(B.compact([this.buffer,e])))),r=this.flush_url(e),this.buffer=[],$.Deferred(function(n){return function(i){var o,s;return s=new Image,s.src=r,o=function(){return i.resolve()},s.onerror=o,s.onload=o}}(this))):$.when()},t.push=function(e,r){var n;return this.buffer=function(){var i,o,s,a;for(s=this.buffer,a=[],i=0,o=s.length;i<o;i++)n=s[i],n!==e&&a.push(n);return a}.call(this),this.buffer.push(e),this.buffer.length>50||r?this.flush_now(r):this.flush_later()},t}()),ne=z.ReferrerTracker||(z.ReferrerTracker=function(){function t(){}return t.MAX_ITEMS=20,t.get_cookie=function(){return window.Cookies.getJSON("itchio_refs")||[]},t.write_cookie=function(e){return z.set_cookie("itchio_refs",e,{expires:14})},t.has_ref=function(e,r){var n,i,o,s,a,u;for(r=+r,a=t.get_cookie(),o=0,s=a.length;o<s;o++)if(u=a[o],i=u[0],n=u[1],i===e&&n===r)return!0;return!1},t.push=function(e,r,n){var i,o;if(n&&n.length>0){for(r=+r,o=function(){var s,a,u,l;for(u=this.get_cookie(),l=[],s=0,a=u.length;s<a;s++)i=u[s],!(i[0]===e&&i[1]===r)&&l.push(i);return l}.call(t),z.in_dev&&console.log("pushing referrer",[e,r,n]),o.unshift([e,r,n]);o.length>t.MAX_ITEMS;)o.pop();return t.write_cookie(o)}},t}()),q=function(t){return z.libs.react.done(t)},Z=null;q(function(){var t,e,r,n,i;return e=O,r=e.a,i=e.p,n=e.button,t={},Z=P.component("ConversionLink",{pure:!0,propTypes:{source:E.number,object_type:E.number,object_id:E.number,href:E.string,target:E.string,class:E.any,impression:E.bool,impression_delay:E.number,on_click:E.func,on_impression:E.func},click:function(){return this.link_ref.current.click()},getInitialState:function(){return{seen:!1}},get_suffix:function(){return this.props.source+":"+this.props.object_type+":"+this.props.object_id},on_click:function(o){var s,a,u,l;if(o.type==="click"&&(s=this.link_ref.current,u=o.metaKey||o.ctrlKey||o.shiftKey||this.props.target==="_blank",i=this.handle_click(),!u&&i.state()!=="resolved"))return o.preventDefault(),l=new Date,a=function(c){return function(){if(a)return a=null,window.location=c.props.href}}(this),setTimeout(function(c){return function(){return typeof a=="function"?a():void 0}}(this),200),i.done(a)},on_mouse_up:function(o){if(o.button===1)return this.handle_click()},handle_click:function(){var o,s;return this.props.object_type&&this.props.source&&this.props.object_id?this.state.clicked?this.state.clicked:(s=F.types.click+":"+this.get_suffix(),t[s]?$.when():(t[s]=!0,F.click(this.get_suffix()),i=F.flush_now_beacon(),this.props.track_referrer&&ne.push.apply(ne,this.props.track_referrer),this.setState({clicked:i}),typeof(o=this.props).on_click=="function"&&o.on_click(),i)):$.when()},componentDidMount:function(){var o;if(this.props.object_type&&this.props.source&&this.props.object_id&&this.props.impression!==!1&&!t[F.types.impression+":"+this.get_suffix()])return o=function(s){return function(){var a;if(!s.unmounted)return a=s.link_ref.current,s.unbind_visibility=$(a).lazy_images({elements:[a],show_images:function(){var u,l;return l=F.types.impression+":"+s.get_suffix(),t[l]||(F.push(l),t[l]=!0),typeof(u=s.props).on_impression=="function"&&u.on_impression(),s.setState({seen:!0}),typeof s.unbind_visibility=="function"&&s.unbind_visibility(),s.unbind_visibility=null}})}}(this),this.props.impression_delay?setTimeout(o,this.props.impression_delay):o()},componentWillUnmount:function(){return this.unmounted=!0,typeof this.unbind_visibility=="function"?this.unbind_visibility():void 0},render:function(){var o;return r({ref:this.link_ref||(this.link_ref=k.createRef()),href:this.props.href,className:this.props.class||this.props.className,onClick:this.on_click,onMouseUp:this.on_mouse_up,target:this.props.target,tabIndex:(o=this.props.tabindex)!=null?o:this.props.tabIndex,"aria-hidden":this.props["aria-hidden"]},this.props.children)}})}),window.init_ConversionLink=function(t,e){P.render(t,()=>Z(e))},q(function(){var t,e;return t=R.package("Index"),e=PropTypes,t("LazyVideo",{pure:!0,getInitialState:function(){return{visible:!1}},componentDidMount:function(){var r,n;if(r=this.container_ref.current,!!r)return n=function(i){return function(o){var s,a,u,l;for(l=[],a=0,u=o.length;a<u;a++)s=o[a],l.push(i.setState({visible:s.isIntersecting}));return l}}(this),this.io=new IntersectionObserver(n,{}),this.io.observe(r)},componentWillUnmount:function(){var r;return(r=this.io)!=null?r.disconnect():void 0},render:function(){return I.support_intersection_observer()?React.createElement("video",{ref:this.container_ref||(this.container_ref=React.createRef()),className:classNames(this.enclosing_class_name,this.props.className),src:this.state.visible?this.props.src:void 0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0}):null}})});var gt,w=gt=window.$;window.init_YoutubeGamePromoBanner=function(t,e){w(t).on("click",".close_button",function(r){w(t).remove();const i=w(r.currentTarget).data("url");i&&w.post(i,z.with_csrf())})},window.init_GamePromoBanner=function(t,e){};var vt=function(t,e){var r;return r=function(n){var i,o,s,a;if(n.closest(".game_author").length||(i=n.closest("[data-game_id]").data("game_id"))&&ne.push("game",i,e(n)),!n.closest(".sale_author").length&&(o=n.closest("[data-sale_id]"),s=o.data("sale_id")))return a=o.data("sale_type"),ne.push(a,s,e(n))},t.on("mouseup",".game_cell a, .sale_row a, .leader_game a",function(n){if(!(n.which>3))return r(w(n.currentTarget))}),t.on("i:track_link",function(n){return r(w(n.target))})},ye=function(t,e){return function(){return t.apply(e,arguments)}},wt=z.HoverManager=function(){t.prototype.default_opts={timeout:1e3,enter_timeout:150,fade_timeout:400,show:function(){},hide:function(){},after_fade:function(){}};function t(e){this._clear_enter_timeout=ye(this._clear_enter_timeout,this),this._clear_fade_timeout=ye(this._clear_fade_timeout,this),this._clear_leave_timeout=ye(this._clear_leave_timeout,this),this.opts=$.extend({},this.default_opts,e),this.open=!1}return t.prototype.enter=function(){if(!this.enter_timeout)return this._clear_leave_timeout(),this._clear_fade_timeout(),this.enter_timeout=window.setTimeout(function(e){return function(){var r;return delete e.enter_timeout,e.open||typeof(r=e.opts).show=="function"&&r.show(),e.open=!0}}(this),this.opts.enter_timeout)},t.prototype.leave=function(){if(!this.leave_timeout)return this._clear_enter_timeout(),this.leave_timeout=window.setTimeout(function(e){return function(){return delete e.leave_timeout,e.hide()}}(this),this.opts.timeout)},t.prototype.hide=function(){var e;return this._clear_enter_timeout(),this._clear_leave_timeout(),this.open&&typeof(e=this.opts).hide=="function"&&e.hide(),this.open=!1,this.hiding=!0,this.fade_timeout=window.setTimeout(function(r){return function(){var n;return typeof(n=r.opts).after_fade=="function"&&n.after_fade(),r.hiding=!1}}(this),this.opts.fade_timeout)},t.prototype.show=function(){var e;return typeof(e=this.opts).show=="function"?e.show():void 0},t.prototype._clear_leave_timeout=function(){if(this.leave_timeout)return window.clearTimeout(this.leave_timeout),delete this.leave_timeout},t.prototype._clear_fade_timeout=function(){if(this.fade_timeout)return window.clearTimeout(this.fade_timeout),delete this.fade_timeout},t.prototype._clear_enter_timeout=function(){if(this.enter_timeout)return window.clearTimeout(this.enter_timeout),delete this.enter_timeout},t}(),bt=function(t,e){return function(){return t.apply(e,arguments)}},ae=function(){t.prototype.track_category="header";function t(e){this.setup_browse_menu=bt(this.setup_browse_menu,this);var r,n;this.el=w(e),z.tracked_links(this.el,this.track_category,"click"),this.el.is(".sticky")&&w("html").css({scrollPaddingTop:this.el.outerHeight()+"px"}),w("#maincontent").length||(r=w(document.body).find(".page_widget"),r.length?(n=r.attr("id"))?(r.attr("tabindex","-1"),this.el.find(".skip_to_main").attr("href","#"+n)):r.attr("id","maincontent").attr("tabindex","-1"):(z.in_dev&&console.warn("no main content, removing skip link"),this.el.find(".skip_to_main").remove())),this.el.on("click",".menu_tick",function(i){return function(o){var s,a,u;if(!w(o.target).closest(".drop_menu").length)return u=w(o.currentTarget),a=u.closest(".drop_menu_wrap").toggleClass("open"),s=w(document.body),a.is(".open")?(u.trigger("i:track_link"),s.on("click.drop_menu",function(l){if(!w(l.target).closest(a).length)return a.removeClass("open"),s.off("click.drop_menu")})):s.off("click.drop_menu")}}(this)),this.setup_browse_menu()}return t.prototype.setup_browse_menu=function(){var e,r;return e=[],r=function(n){return function(i,o){var s,a,u;return s=n.el.find(i),a=n.el.find(o),u=new wt({timeout:750,enter_timeout:100,show:function(){return a.addClass("open"),s.addClass("open"),setTimeout(function(){return a.addClass("visible")},1),e.forEach(function(l){if(l!==u)return l.hide()})},hide:function(){return s.removeClass("open"),a.removeClass("visible")},after_fade:function(){return a.removeClass("open")}}),n.el.on("mouseenter mouseleave",i+", "+o,function(l){return l.type==="mouseenter"?u.enter():u.leave()}),u}}(this),e.push(r(".browse_btn",".header_dropdown[data-target=browse]")),e.push(r(".active_site_promotion_btn",".header_dropdown[data-target=site_promotion]")),w(document.body).on("click",function(n){return function(i){var o;o=w(i.target).closest(".browse_btn, .active_site_promotion_btn, .header_dropdown"),!o.length&&e.forEach(function(s){return s.hide()})}}(this))},t}(),He=[].slice,G=null,yt=null,xt=null,kt=null,It=null,Nt=null,$t=null,Ye=null,Je=null,Ve=null,Ke=null;q(function(){var t,e,r;return t=O,e=t.a,r=t.img,G=function(){var n,i,o;return o=arguments[0],i=2<=arguments.length?He.call(arguments,1):[],o==null&&(o={}),k.createElement.bind(null,k.memo(n=function(s){var a,u,l,c,p;return k.createElement.apply(k,["svg",{className:L("svgicon",s.className,o.className),role:"img",version:"1.1",viewBox:"0 0 24 24",width:(a=s.width)!=null?a:"24",height:(u=s.height)!=null?u:"24",fill:(l=(c=s.fill)!=null?c:o.fill)!=null?l:"none",stroke:"currentColor",strokeWidth:(p=s.strokeWidth)!=null?p:"2",strokeLinejoin:"round",strokeLinecap:"round","aria-hidden":!0}].concat(He.call(i)))}))},yt=G({className:"icon_tri_up",fill:"currentColor"},k.createElement("polygon",{points:"2 18 12 6 22 18"})),xt=G({className:"icon_tri_down",fill:"currentColor"},k.createElement("polygon",{points:"2 6 12 18 22 6"})),kt=G({className:"icon_filter"},k.createElement("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})),It=G({className:"icon_edit"},k.createElement("path",{d:"M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"}),k.createElement("polygon",{points:"18 2 22 6 12 16 8 16 8 12 18 2"})),Nt=G({className:"icon_external_link"},k.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),k.createElement("polyline",{points:"15 3 21 3 21 9"}),k.createElement("line",{x1:"10",y1:"14",x2:"21",y2:"3"})),$t=G({className:"icon_help"},k.createElement("circle",{cx:"12",cy:"12",r:"10"}),k.createElement("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),k.createElement("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})),Ye=G({className:"icon_search"},k.createElement("circle",{cx:"11",cy:"11",r:"8"}),k.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})),Je=G({className:"icon_tag"},k.createElement("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),k.createElement("line",{x1:"7",y1:"7",x2:"7",y2:"7"})),Ke=G({className:"icon_browse_category"},k.createElement("path",{d:"M4 4h16v2H4zM4 10h10v2H4zM4 16h14v2H4z"})),Ve=G({className:"icon_verified"},k.createElement("title",{},"Verified Account"),k.createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),k.createElement("polyline",{points:"22 4 12 14.01 9 11.01"}))});var Rt={}.hasOwnProperty,ue=null;q(function(){var t,e,r,n,i,o,s,a,u,l,c,p,v,d,g;return e=O,i=e.div,o=e.fragment,a=e.input,n=e.button,u=e.label,r=e.a,p=e.section,g=e.ul,l=e.li,d=e.strong,v=e.span,s=e.img,o=k.createElement.bind(null,k.Fragment),o.type=k.fragment,t=P.package("Search"),c=function(f){if(f)return i({className:"sub_text"},f.map(function(m){return function(h,y){return o({key:y},y>0?", ":void 0,h.verified?o({},Ve({width:12})," "):void 0,h.name)}}(this)))},ue=t("AutocompleteInput",{getInitialState:function(){return{query:this.props.defaultValue}},componentDidMount:function(){if(this.input_wrapper_ref.current.parentNode.classList.add(this.enclosing_class_name()),$(document.body).on("focusin focusout",this.detect_focus),this.props.autofocus&&this.input_ref.current.focus(),this.props.defaultValue)return this.on_change()},componentWillUnmount:function(){return $(document.body).off("focusin focusout",this.detect_focus)},render:function(){var f,m,h,y,b,x;return o({},function(){var N,M;if(this.props.search_params){N=this.props.search_params,M=[];for(f in N)Rt.call(N,f)&&(x=N[f],M.push(a({key:f,type:"hidden",name:f,value:x})));return M}}.call(this),i({className:"input_wrapper",ref:this.input_wrapper_ref||(this.input_wrapper_ref=k.createRef())},a({type:"text",required:!0,name:"q",className:"search_input autocomplete_search_input",placeholder:(m=(h=this.props.i18n)!=null?h.search_placeholder:void 0)!=null?m:this.t("layout.header.search_placeholder"),defaultValue:this.props.defaultValue,autoComplete:"off",onChange:this.on_change,onKeyDown:this.on_key_down,onBlur:this.on_blur,ref:this.input_ref||(this.input_ref=k.createRef())}),this.render_autocomplete_results()),this.props.show_submit!==!1?n({className:L("submit_btn",{is_active:this.state.query}),"aria-label":(y=(b=this.props.i18n)!=null?b.search:void 0)!=null?y:this.t("layout.header.search")},Ye({width:18,strokeWidth:3})):void 0)},detect_focus:function(){this.detect_focus=B.debounce(function(f){return function(){var m;if(m=f.input_wrapper_ref.current.contains(document.activeElement),f.state.in_focus!==m)return f.setState({in_focus:m})}}(this),100),this.detect_focus()},on_blur:function(f){if(this.state.selected_idx!=null)return this.setState({selected_idx:null})},on_key_down:function(f){var m;switch(f.keyCode){case 38:this.result_list&&this.state.selected_idx!=null&&(f.preventDefault(),this.setState(function(h){return{selected_idx:Math.max(0,h.selected_idx-1)}}));break;case 40:this.result_list&&(f.preventDefault(),this.setState(function(h){var y;return{selected_idx:Math.min(((y=h.selected_idx)!=null?y:-1)+1,this.result_list.length-1)}}));break;case 13:this.state.selected_idx!=null&&(f.preventDefault(),m=this.result_list[this.state.selected_idx],m.ref.current.click());break;case 27:f.preventDefault(),this.clear_search(),this.input_ref.current.value=""}},on_change:function(f){var m,h,y;if(h=$.trim(this.input_ref.current.value),h===""){this.clear_search();return}return this.setState({query:h,selected_idx:null}),this.query_cache||(this.query_cache={}),y=(m=this.query_cache)[h]||(m[h]=$.getJSON(this.props.autocomplete_url,{query:h})),this.current_request=y,y.done(function(b){return function(x){if(y===b.current_request)return b.setState({selected_idx:null,results:x})}}(this)),y.always(function(b){return function(){if(y===b.current_request)return delete b.current_request}}(this))},clear_search:function(){return delete this.current_request,delete this.result_list,this.setState({query:null,results:null,selected_idx:null})},render_autocomplete_results:function(){if(this.state.results&&this.state.in_focus)return this.result_list=[],i({className:"autocomplete_results_popup"},this.props.search_url?p({className:"autocomplete_result_set"},g({},l({},r({href:this.props.search_url+"?q="+window.encodeURIComponent(this.state.query),className:"forward_link"},"See results for '"+this.state.query+"'")))):void 0,this.state.results.group_order?this.state.results.group_order.map(function(f){return function(m){switch(m){case"featured_tags":return f.render_tag_results();case"jams":return f.render_jam_results();case"games":return f.render_game_results()}}}(this)):(this.render_tag_results(),this.render_jam_results(),this.render_game_results()))},render_tag_results:function(){var f;if((f=this.state.results.tags)!=null&&f.length)return p({className:"autocomplete_result_set",key:"featured_tags"},d({className:"result_header"},"Browse"),g({className:"tag_results"},this.state.results.tags.map(function(m){return function(h,y){var b,x,N;return m.result_list.push(h),b=function(){switch(h.type){case"browse_facets":return this.props.ca_types.browse_facet;case"featured_tags":return this.props.ca_types.featured_tag}}.call(m),N=function(){switch(h.default_classification){case"game_mod":return this.tt("misc.classifications.game_mod");case"physical_game":return"Tabletop";case"assets":return this.tt("misc.classifications.assets")}}.call(m),l({className:"autocomplete_result tag_result",key:h.url},Z({ref:h.ref||(h.ref=k.createRef()),href:h.url,object_id:h.id,object_type:b,source:m.props.ca_source,impression_delay:400,className:L({selected:m.state.selected_idx===m.result_list.length-1})},function(){switch(h.type){case"browse_facets":return Ke({});default:return Je({})}}(),i({className:"result_content"},i({className:"title"},h.name),h.stats!=null&&h.stats.count?v({className:"sub_text"},z.number_format(((x=h.stats)!=null?x.count:void 0)||0)," ",function(){var M;switch((M=h.stats)!=null?M.count_unit:void 0){case"jams":return"Jams";default:return"Projects"}}()):void 0),N?i({className:"tag_classification"},N):void 0))}}(this))))},render_game_results:function(){var f;if((f=this.state.results.games)!=null&&f.length)return p({className:"autocomplete_result_set",key:"games"},d({className:"result_header"},"Games & Projects"),g({className:"game_results"},this.state.results.games.map(function(m){return function(h,y){return m.result_list.push(h),l({className:"autocomplete_result game_result",key:m.props.ca_types.game+":"+h.id},Z({ref:h.ref||(h.ref=k.createRef()),href:h.url,object_id:h.id,object_type:m.props.ca_types.game,source:m.props.ca_source,impression_delay:400,className:L({selected:m.state.selected_idx===m.result_list.length-1})},i({className:"result_icon"},h.cover&&h.cover!==""?s({loading:"lazy",srcSet:h.cover+" 1x, "+h.cover2x+" 2x",width:30,height:30,src:h.cover}):void 0),i({className:"result_content"},i({className:"title"},h.name),c(h.contributors))))}}(this))))},render_jam_results:function(){var f;if((f=this.state.results.jams)!=null&&f.length)return p({className:"autocomplete_result_set",key:"jams"},d({className:"result_header"},"Jams"),g({className:"jam_results"},this.state.results.jams.map(function(m){return function(h,y){var b;return m.result_list.push(h),b=function(){switch(h.state){case"during_voting":case"during_submit":return"Ongoing";case"finished":return"Ended";case"before":return"Upcoming"}}(),l({className:"autocomplete_result jam_result",key:y},Z({ref:h.ref||(h.ref=k.createRef()),href:h.url,object_id:h.id,object_type:m.props.ca_types.jam,source:m.props.ca_source,impression_delay:400,className:L({selected:m.state.selected_idx===m.result_list.length-1})},i({className:"result_icon"},h.cover&&h.cover!==""?s({loading:"lazy",srcSet:h.cover+" 1x, "+h.cover2x+" 2x",width:30,height:30,src:h.cover}):void 0),i({className:"result_content"},i({className:"title"},h.name),c(h.contributors)),b?i({className:L("jam_state","state_"+h.state)},b):void 0))}}(this))))}})});var ee=function(t,e){return function(){return t.apply(e,arguments)}},Ct=function(){t.prototype.get_grid_referrer_source=function(e){var r;return r=e.closest("[data-ca_source]"),r.length?r.attr("data-ca_source"):"1"};function t(e,r){var n,i,o,s,a;for(r==null&&(r={}),this.setup_blog_posts=ee(this.setup_blog_posts,this),this.setup_sizer=ee(this.setup_sizer,this),this.toggle_sidebar=ee(this.toggle_sidebar,this),this.setup_impressions=ee(this.setup_impressions,this),this.setup_sidebar_search=ee(this.setup_sidebar_search,this),this.get_grid_referrer_source=ee(this.get_grid_referrer_source,this),this.el=w(e),I.event("index","hit",""+(I.current_user&&"logged in"||"logged out")),r.recs_count&&I.event("index","recs_count",""+r.recs_count),this.el.has_tooltips(),this.el.find(".sale_list_widget").format_timestamps("fromNow"),this.setup_sizer(),this.setup_impressions(),this.setup_blog_posts(),this.setup_mobile_swipe(),this.setup_sidebar_search(r.autocomplete_props),s=this.el.find(".featured_game_grid_widget"),i=0,o=s.length;i<o;i++)n=s[i],new I.GameGrid(n,{sizer:this.sizer});vt(this.el,function(u){return function(l){var c;return c=l.closest("[data-grid_referrer]"),c.length?c.data("grid_referrer"):"index:"}}(this)),a=I.ga_tracker("index"),I.deferred_links(this.el,"a[data-label]",function(u){return function(l){var c,p;return c=l.closest("[data-game_id]").data("game_id"),c?(p=u.get_grid_referrer_source(l),F.click(p+":1:"+c),w.when(a(l),F.flush_now())):a(l)}}(this)),I.is_mobile()&&this.el.addClass("is_mobile"),this.el.on("submit",".game_search",function(u){return function(l){var c;return c=w(l.currentTarget).find("input").val(),I.event("index","search",c)}}(this)),w(".header_widget .mobile_nav_btn").on("click",function(u){return function(){return I.event("index","mobile","menu_toggle"),u.toggle_sidebar()}}(this)),this.el.dispatch("click",{sidebar_close_btn:function(u){return function(){return u.toggle_sidebar()}}(this),sidebar_shroud:function(u){return function(){return u.toggle_sidebar()}}(this)}),this.el.addClass("ready")}return t.prototype.setup_mobile_swipe=function(){var e,r,n,i,o;return o=100,n=null,i=null,r=function(s){return function(a){return s.toggle_sidebar(a==="right")}}(this),e=function(s){if(s)return s.scrollWidth>s.clientWidth?s:e(s.parentNode)},this.el.on("touchstart",function(s){return function(a){var u;if(u=a.originalEvent.touches[0],!e(a.target))return n=u.pageX,i=u.pageY}}(this)),this.el.on("touchmove",function(s){return function(a){var u,l,c;if(n!=null&&i!=null&&(c=a.originalEvent.touches[0],u=c.pageX-n,l=c.pageY-i,Math.abs(u)>Math.abs(l)&&Math.abs(u)>o))return u>0?r("right"):r("left"),n=null,i=null}}(this))},t.prototype.setup_sidebar_search=function(e){return this.el.find(".game_search").on_first_view(function(r){return function(n){return P.render(n,function(){return ue(Object.assign({show_submit:!1},e))})}}(this))},t.prototype.setup_impressions=function(){return this.el.on("i:impression",function(e){return function(r){var n,i,o;if(o=w(r.target),n=o.closest("[data-game_id]").data("game_id"),!!n)return i=e.get_grid_referrer_source(o),F.push("1:"+i+":1:"+n)}}(this))},t.prototype.toggle_sidebar=function(e){var r;return this.el.find(".index_sidebar").toggleClass("visible",e),r=this.el.find(".sidebar_shroud").toggleClass("open",e),this.el.toggleClass("sidebar_open",r.is(".open")),_.defer(function(n){return function(){return r.toggleClass("visible",r.is(".open"))}}(this))},t.prototype.setup_sizer=function(){var e,r,n;return r=this.el.find(".featured_game_grid_widget"),e=(n=window.location.hash.match(/\bsize=([^&]*)/))!=null?n[1]:void 0,this.sizer=new I.GameGridSizer({el:r,cell_margin:10,container_selector:".main_column .featured_game_grid_widget",expected_size:e?+e:I.is_mobile()?300:250}),this.sizer.on_size(function(i){return function(o){var s,a,u,l,c,p,v,d;for(v=i.el.find("[data-max_rows]"),u=0,l=v.length;u<l;u++)a=v[u],a=w(a),s=a.data("overflow_from")?void 0:a.data("original_cells"),s||(s=a.find(".game_cell"),a.data("overflow_from")||a.data("original_cells",s)),p=a.data("overflow_into"),p&&(p=w(".overflow_"+p)),c=a.data("max_rows")*o.cells_per_row,c=Math.max(o.cells_per_row,Math.min(c,Math.floor(s.length/o.cells_per_row)*o.cells_per_row)),d=s.appendTo(a).show().slice(c),p?(p.parent("section").toggle(!!d.length),p.append(d)):d.hide();return w(window).trigger("i:reshape")}}(this))},t.prototype.setup_blog_posts=function(){return this.el.find(".blog_post_carousel").lazy_images({selector:".post_link",target:this.el.find(".blog_post_carousel ul"),horizontal:!0})},t}();window.init_Index=function(t,e){new Ct(t,e)};var zt=function(t,e){for(var r in e)St.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},St={}.hasOwnProperty,Mt=function(t){zt(e,t);function e(){e.__super__.constructor.apply(this,arguments),this.el.dispatch("click",{edit_theme_btn:function(r){return function(){return r.toggle_theme_editor()}}(this)}),window.location.hash.match(/\bedit_theme\b/)&&B.defer(function(r){return function(){return r.toggle_theme_editor()}}(this))}return e.prototype.toggle_theme_editor=function(){var r;return r=!z.theme_editor.state.open,z.theme_editor.setState({open:r}),$(document.body).toggleClass("theme_editor_open",r)},e}(ae);window.init_GameHeader=function(t,e){new Mt(t,e)},window.init_Header=function(t,e){let r=null;I.libs.react.done(function(){e.autocomplete_props&&r&&(e.autocomplete_props.defaultValue=r.val(),r.is(":focus")&&(e.autocomplete_props.autofocus=!0))}),new ae(t),e.autocomplete_props&&R.render(t+" .game_search",()=>ue(e.autocomplete_props)),window.ReactDOM||(r=$(t).find(".game_search .search_input").on("focus",function(){setTimeout(()=>I.add_react(),500)}))},window.init_JamLayoutHeader=function(t,e){let r=null;I.libs.react.done(function(){e.autocomplete_props&&r&&(e.autocomplete_props.defaultValue=r.val(),r.is(":focus")&&(e.autocomplete_props.autofocus=!0))}),new ae(t),e.autocomplete_props&&R.render(t+" .game_search",()=>ue(e.autocomplete_props)),window.ReactDOM||(r=$(t).find(".game_search .search_input").on("focus",function(){setTimeout(()=>I.add_react(),500)}))};var jt=function(t,e){for(var r in e)Tt.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},Tt={}.hasOwnProperty,Et=function(t){jt(e,t);function e(){e.__super__.constructor.apply(this,arguments),this.el.dispatch("click",{edit_theme_btn:function(r){return function(){return r.toggle_theme_editor()}}(this)}),window.location.hash.match(/\bedit_theme\b/)&&B.defer(function(r){return function(){return r.toggle_theme_editor()}}(this))}return e.prototype.toggle_theme_editor=function(){var r;return r=!z.theme_editor.state.open,z.theme_editor.setState({open:r}),$(document.body).toggleClass("theme_editor_open",r)},e}(ae);window.init_UserProfileHeader=function(t,e){new Et(t,e)};var A=[].slice,Dt=function(t,e){for(var r in e)Pt.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},Pt={}.hasOwnProperty;I.Lightbox&&console.warn("I.Lightbox is being double declared");var Ot=I.Lightbox||(I.Lightbox=function(){t.include_dependencies=function(e){var r;return e?(r=[],e.redactor&&!w.fn.redactor&&(w("head").append(e.redactor),r.push(I.libs.redactor)),e.selectize&&!w.fn.selectize&&(w("head").append(e.selectize),r.push(I.libs.selectize)),r):[]},t.lightbox_container=function(){return this._container||(this._container=w("#lightbox_container").exists()||w('<div id="lightbox_container"></div>').appendTo("body"))},t.shroud_container=function(){return this._shroud||(this._shroud=w("#lightbox_shroud").exists()||w('<div id="lightbox_shroud"></div>').appendTo("body"))},t.show_shroud=function(){var e;if(!this.shroud_visible)return this._shroud||(e=this.shroud_container(),this.lightbox_container().on("click",function(r){return function(n){if(!w(n.target).closest(".lightbox").length)return w(n.target).attr("href")==="javascript:void(0)"?void 0:r.close()}}(this)),e.on("click",function(r){return function(){return r.close()}}(this)),w(document.body).on("keydown",function(r){return function(n){return n.keyCode===27?(n.preventDefault(),n.stopPropagation(),r.close()):r.on_keydown(n)}}(this)),w(window).on("resize",function(r){return function(n){return r.on_resize(n)}}(this))),this.shroud_visible=!0,this.shroud_container().addClass("invisible").show(),_.defer(function(r){return function(){return r.shroud_container().removeClass("invisible")}}(this))},t.hide_shroud=function(){return this.shroud_visible=!1,this.shroud_container().hide()},t.open_loading=function(){return this.open_tpl("loading_lightbox")},t.open_remote_react=function(e,r){return this.open_loading(),w.when(I.add_react(),w.ajax({dataType:"json",url:e,data:{props:!0},xhrFields:{withCredentials:!0},error:function(n){return function(i,o,s){var a,u,l;return l=function(){try{return JSON.parse(i.responseText)}catch(c){}}(),a=(u=l!=null?l.errors:void 0)!=null?u:["Something went wrong. Please try again later and contact support if it persists."],R.ErrorLightbox?I.Lightbox.open(R.ErrorLightbox({errors:a})):(alert(a.join(",")),n.close())}}(this)})).done(function(n){return function(i,o){var s,a;if(a=o[0],a.errors){R.ErrorLightbox?I.Lightbox.open(R.ErrorLightbox(a)):(alert(a.errors.join(",")),n.close());return}return s=I.Lightbox.include_dependencies(a._dependencies),w.when.apply(w,[r(a)].concat(A.call(s))).then(function(u){return u?I.Lightbox.open(u):n.close()})}}(this))},t.open_remote=function(){var e,r,n;return n=arguments[0],e=arguments[1],r=3<=arguments.length?A.call(arguments,2):[],e==null&&(e=I.Lightbox),this.open_loading(),w.ajax({dataType:"json",url:n,data:{lightbox:!0},xhrFields:{withCredentials:!0},success:function(i){return function(o){if(o.errors){alert(o.errors.join(",")),i.close();return}return i.open.apply(i,[o.content,e].concat(A.call(r)))}}(this),error:function(i){return function(o,s,a){return alert("Something went wrong. Please try again later and contact support if it persists."),i.close()}}(this)})},t.open_tpl=function(){var e,r,n;if(n=arguments[0],e=2<=arguments.length?A.call(arguments,1):[],r=w("#"+n+"_tpl"),!r.length)throw"missing template for lightbox: "+n;return this.open.apply(this,[r.html()].concat(A.call(e)))},t.open_tpl_with_params=function(){var e,r,n,i,o;if(o=arguments[0],i=arguments[1],e=3<=arguments.length?A.call(arguments,2):[],r=w("#"+o+"_tpl"),!r.length)throw"missing template for lightbox: "+o;return n=_.template(r.html())(i),this.open.apply(this,[n].concat(A.call(e)))},t.open=function(){var e,r,n,i,o,s;return n=arguments[0],e=arguments[1],r=3<=arguments.length?A.call(arguments,2):[],e==null&&(e=I.Lightbox),this.current_lightbox&&(this.current_lightbox.close(),this.current_lightbox=null),s=!1,n.$$typeof?(s=!0,i=new I.ReactLightbox(n,this)):(typeof n=="string"&&(n=w.trim(n)),o=w(n),(i=o.data("object"))||(s=!0,i=function(a,u,l){l.prototype=a.prototype;var c=new l,p=a.apply(c,u);return Object(p)===p?p:c}(e,[o,this].concat(A.call(r)),function(){}),o.data("object",i))),w(document.body).addClass("lightbox_open"),this.show_shroud(),i.show(s),this.current_lightbox=i,i},t.close=function(){var e;if(!(this.current_lightbox&&!this.current_lightbox.is_closable())&&!(this.current_lightbox&&this.current_lightbox.el.is(".has_changes")&&!confirm("You've have unsaved changes in this dialog. Are you sure you want to close it?")))return this.hide_shroud(),(e=this.current_lightbox)!=null&&e.close(),this.current_lightbox=null,w(document.body).removeClass("lightbox_open")},t.on_keydown=function(e){var r,n;return(r=this.current_lightbox)!=null&&(n=r.el)!=null?n.trigger("i:lightbox_keydown",e):void 0},t.on_resize=function(e){var r,n;return(r=this.current_lightbox)!=null&&(n=r.el)!=null?n.trigger("i:lightbox_resize",e):void 0};function t(){var e,r,n;e=arguments[0],r=arguments[1],n=3<=arguments.length?A.call(arguments,2):[],this.parent=r,this.el=w(e),this.el.data("lightbox",this),this.el.on("click",".close_button, .close_btn",function(i){return function(o){return I.Lightbox.close(),!1}}(this)),this.init.apply(this,n)}return t.prototype.init=function(){},t.prototype.first_show=function(){},t.prototype.with_selectize=function(e){var r;if(!w.fn.selectize){if(r=this.el.data().selectize,!r)throw"missing selectize include in lightbox";w("head").append(r)}return I.with_selectize(e)},t.prototype.with_redactor=function(e){var r;if(!w.fn.redactor){if(r=this.el.data().redactor,!r)throw"missing redactor include in lightbox";w("head").append(r)}return I.libs.redactor.done(e)},t.prototype.show=function(e){if(this.el.appendTo(this.parent.lightbox_container()).addClass("animated").show().trigger("i:lightbox_open"),this.position(),e)return this.first_show()},t.prototype.close=function(){return this.el.removeClass("animated").hide().trigger("i:lightbox_close").remove()},t.prototype.position=function(){var e;return e=this.parent.lightbox_container().css("position")==="fixed"?"":w(window).scrollTop()+"px",this.el.css({top:e})},t.prototype.closable=!0,t.prototype.is_closable=function(){return this.closable},t}()),er=I.ReactLightbox||(I.ReactLightbox=function(t){Dt(e,t);function e(){var r,n,i,o,s,a;r=arguments[0],i=arguments[1],s=3<=arguments.length?A.call(arguments,2):[],a=w('<div class="react_lightbox"></div>').appendTo(i.lightbox_container()),o=ReactDOM.render(r,a[0]),n=ReactDOM.findDOMNode(o),e.__super__.constructor.apply(this,[n,i].concat(A.call(s)))}return e.prototype.show=function(r){return this.el.addClass("animated"),this.position()},e.prototype.close=function(){var r;return this.el.trigger("i:lightbox_close"),r=this.el.parent(),ReactDOM.unmountComponentAtNode(r[0]),r.remove()},e}(I.Lightbox));z.Lightbox||console.warn("I.Lightbox is being depended on but is missing from the page");var le=z.Lightbox,Lt=function(t,e){for(var r in e)Ft.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},Ft={}.hasOwnProperty,qt=function(t){Lt(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}return e.prototype.init=function(r){return this.el.dispatch("click",{tab_btn:function(n){return function(i){var o;return o=i.data("tab"),n.el.find(".tab_content").hide().filter("[data-tab="+o+"]").show(),n.el.find(".tab_btn").removeClass("selected").filter(i).addClass("selected")}}(this),pick_image_btn:function(n){return function(i){return typeof r=="function"?r(i.data("url")):void 0}}(this),upload_image_btn:function(n){return function(i){return z.upload_image({url:z.root_url("dashboard/upload-image"),thumb_size:"original"}).progress(function(){if(!i.prop("disabled"))return i.prop("disabled",!0).addClass("disabled"),i.data("original_text",i.text()),i.text("Uploading...")}).fail(function(){return i.prop("disabled",!1).removeClass("disabled"),i.text(i.data("original_text"))}).done(function(o){var s,a;return i.prop("disabled",!1).removeClass("disabled"),i.text(i.data("original_text")),o.success?typeof r=="function"?r(o.upload.thumb_url):void 0:(s=((a=o.errors)!=null?a[0]:void 0)||"Image upload failed",z.flash(s,"error"))})}}(this)})},e}(le),Xe=null,At={plugins:["source","table","alignment","video","addimage"],toolbarFixed:!1,buttons:["format","bold","italic","deleted","lists","link"],minHeight:250,linkSize:80},Gt=function(t,e){var r,n;if(e==null&&(e={}),!window.location.href.match(/\bredactor=0\b/)&&!z.in_test){if(!w.fn.redactor){console.warn("tried to create redactor text element without redactor on page",t[0]);return}e=w.extend({},At,e),e.source===!1&&(delete e.source,e.plugins=function(){var i,o,s,a;for(s=e.plugins,a=[],i=0,o=s.length;i<o;i++)n=s[i],n!=="source"&&a.push(n);return a}()),t.closest(".lightbox_widget").exists()&&e.plugins&&(e.plugins=function(){var i,o,s,a;if(n!=="addimage"){for(s=e.plugins,a=[],i=0,o=s.length;i<o;i++)n=s[i],a.push(n);return a}}());try{return t.redactor(e)}catch(i){return r=i,z.event("error","redactor","invalid_content"),t.parent().replaceWith(t).end().val("").redactor(e)}}};w.Redactor?Xe=w.Redactor:z.libs.redactor.done(function(){return Xe=w.Redactor,w.Redactor.prototype.addimage=function(){return{langs:{en:{}},init:function(){var t;return t=this.button.addAfter("image","image","Add image"),this.button.setIcon(t,'<i class="re-icon-image"></i>'),this.button.addCallback(t,this.addimage.show)},show:function(){return le.open_remote(z.root_url("dashboard/upload-image"),qt,function(t){return function(e){var r;return z.Lightbox.close(),r=w("<img>").attr("src",e)[0].outerHTML,t.placeholder.hide(),t.buffer.set(),t.insert.html(r)}}(this))}}}});var Wt=function(t,e){for(var r in e)Bt.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},Bt={}.hasOwnProperty,xe=z.CollectionLightbox=function(t){Wt(e,t);function e(){return e.__super__.constructor.apply(this,arguments)}return e.prototype.init=function(){var r;return z.has_follow_button(this.el),this.el.find("input[type='radio']:first").prop("checked",!0),this.el.on("click change",".collection_option",function(n){return function(i){var o;return o=$(i.currentTarget),o.find("input[type='radio']").prop("checked",!0)}}(this)),r=this.el.find("form").remote_submit(function(n){return function(i){if(i.errors){if(z.add_recaptcha_if_necessary(r,i.errors))return;r.set_form_errors(i.errors);return}return n.el.addClass("is_complete"),n.el.find(".after_submit .collection_name").text(i.title).attr("href",i.url)}}(this)),this.with_redactor(function(n){return function(){return Gt(n.el.find("textarea"),{minHeight:40,source:!1,buttons:["bold","italic","deleted","lists","link"]})}}(this)),this.with_selectize(function(n){return function(){return n.el.find("select.collection_input").selectize()}}(this))},e}(le),Ut=function(t,e){return function(){return t.apply(e,arguments)}},Ht=I.GamePopups=function(){t.prototype.trigger_selector=".game_thumb",t.prototype.popup_selector=".popup_details",t.prototype.hover_delay=250,t.prototype.close_timeout=200,t.prototype.x_offset=0;function t(e,r){var n;r==null&&(r={}),this.deferred_for_el=Ut(this.deferred_for_el,this),!I.is_mobile()&&(this.el=w(e),w.extend(this,r),n=w(document.body),this.el.on("mouseenter mouseleave",this.trigger_selector,function(i){return function(o){if(e=w(o.currentTarget),!e.closest(".jam_cell").length&&!e.closest(".disable_hover").length)return o.type==="mouseenter"?i.enter(e):i.leave(e)}}(this)),n.on("i:hide_popups",function(i){return function(o,s){return i.close_popup()}}(this)),n.on("i:hide_other_popups",function(i){return function(o,s){if(s!==i)return i.close_popup()}}(this)))}return t.prototype.deferred_for_el=function(e){var r,n,i;return(r=e.data("i:popup_defer"))?r:(n=e.closest("[data-game_id]").data("game_id"),n?(i=I.subdomain?"/-/game/popup/"+n:"/game/popup/"+n,r=w.get(i).then(function(o){return function(s){var a;return _.isObject(s)&&s.errors?w.Deferred():(a=w(s),a.data("object_id",n),new I.GamePopup(a),a)}}(this)),e.data("i:popup_defer",r),r):w.Deferred())},t.prototype.enter=function(e){var r,n;return e.data("i:inside",!0),n=_.debounce(function(i){return function(){if(e.data("i:inside"))return i.deferred_for_el(e).done(function(o){return i.show_popup(e,o)})}}(this),this.hover_delay),r=_.debounce(function(i){return function(){if(e.data("i:inside"))return i.deferred_for_el(e)}}(this),this.hover_delay/2),e.on("mousemove.hover_manager",function(){return n(),r()})},t.prototype.leave=function(e){return e.data("i:inside",!1),e.off("mousemove.hover_manager")},t.prototype.show_popup=function(e,r){var n,i,o,s,a,u,l,c;if(typeof(n=document.body).contains=="function"&&n.contains(e[0])&&this.current_popup!==r){for(this.el.trigger("i:hide_other_popups",[this]),(u=this.current_popup)!=null&&u.stop().detach(),this.current_popup=r.css({left:"0px",top:"0px"}).removeClass("visible"),c=r.find(".popup_screenshot").removeClass("visible"),w(document.body).append(r),this.position_popup(e,r),_.defer(function(p){return function(){return r.addClass("visible")}}(this)),r.data("trigger_el",e),i=function(p){return function(v){return setTimeout(function(){return v.addClass("visible")},o*100)}}(this),o=s=0,a=c.length;s<a;o=++s)l=c[o],i(w(l));return r.hide().css({opacity:""}).fadeIn("fast"),this.watch_for_popup_close()}},t.prototype.watch_for_popup_close=function(){var e,r;return r=this.trigger_selector+", "+this.popup_selector,e=null,w(document.body).on("click.hover_manager",function(n){return function(i){var o;if(o=w(i.target),!o.closest(r).length)return n.close_popup()}}(this)),w(window).on("mousemove.hover_manager",_.throttle(function(n){return function(i){var o;if(o=w(i.target).closest(r),o.length){e&&(window.clearTimeout(e),e=null);return}if(!e)return e=window.setTimeout(function(){return n.close_popup()},n.close_timeout)}}(this),50))},t.prototype.position_popup=function(e,r){var n,i,o,s,a,u,l;return o=e.offset(),l=r.outerWidth(!0),n=r.outerHeight(!0),r.removeClass("on_right"),s=e.outerHeight(),a=e.outerWidth(),u=o.top+(s-n)/2,i=o.left-l,i<0?(i=o.left+a,i+=this.x_offset,r.addClass("on_right")):i-=this.x_offset,r.css({top:Math.floor(u)+"px",left:Math.floor(i)+"px"})},t.prototype.close_popup=function(){var e;return w(window).off("mousemove.hover_manager"),w(document.body).off("click.hover_manager"),(e=this.current_popup)!=null&&e.stop(!0).detach(),this.current_popup=null},t}(),tr=I.GamePopup=function(){function t(e){this.el=w(e),I.tracked_links(this.el,"popups",I.page_name(),"click"),this.el.find("a").on("click",function(r){return function(){var n;if(n=r.el.data("trigger_el"))return n.trigger("i:track_link")}}(this)),this.el.dispatch("click",{watch_trailer_btn:function(r){return I.event("grid",I.page_name(),"watch_trailer"),I.Lightbox.open_remote(r.data("lightbox_url"))}})}return t}(),rr=I.WatchTrailerLightbox=function(){function t(e){this.el=w(e),this.el.dispatch("click",{add_to_collection_btn:function(r){return function(n){return I.event("grid","trailer","add_to_collection"),I.current_user?I.Lightbox.open_remote(n.attr("href"),xe):"continue"}}(this)})}return t}(),Qe,Ze,ce=function(t,e){return function(){return t.apply(e,arguments)}};Qe=0,Ze=function(){return"game_grid_"+Qe++},I.GameGridSizer=function(){t.prototype.container_selector=!1,t.prototype.expected_size=315,t.prototype.aspect_ratio=315/250,t.prototype.cell_margin=10,t.prototype.min_columns=1,t.initialize=_.once(function(){var e,r,n;return e=w(document.body),r=_.debounce(function(){return e.addClass("disable_hover")},200,!0),n=_.debounce(function(){return e.removeClass("disable_hover")},200),w(window).on("scroll resize",function(){r(),n()})});function t(e){e==null&&(e={}),w.extend(this,e),this.size_callbacks=[],this.constructor.initialize(),w(window).on("resize",_.debounce(function(r){return function(){return r.resize_cells()}}(this),200)),this.resize_cells(),I.in_test||_.defer(function(r){return function(){return r.resize_cells()}}(this))}return t.prototype.get_cell_margin=function(){return typeof this.cell_margin=="function"?this.cell_margin():this.cell_margin},t.prototype.get_expected_size=function(){return typeof this.expected_size=="function"?this.expected_size():this.expected_size},t.prototype.on_size=function(e){return this.size_callbacks.push(e)},t.prototype.available_width=function(){var e,r,n,i;return this.el?(e=(i=this.el[0])!=null?i.getBoundingClientRect().width:void 0,n=e-Math.floor(e),r=Math.floor(this.el.width()),n>0&&(r-=1),r):w(window).width()},t.prototype.resize_cells=function(){var e,r,n,i,o,s,a,u,l,c,p,v,d,g;for(i=this.get_expected_size(),r=this.get_cell_margin(),v=i+r,c=this.available_width()+r,l=c/v,p=Math.ceil(l),p<this.min_columns&&(p=this.min_columns),u=c/p-r,a=u/this.aspect_ratio,u=Math.floor(u),a=Math.floor(a),this.cells_per_row=p,this._style&&(this._style.remove(),this._style=null),n="",this.container_selector&&(n+=this.container_selector+` {
  --itchio_grid_gap: `+r+`px;
  --itchio_grid_cell_width: `+u+`px;
  --itchio_grid_cell_columns: `+p+`;
  grid-template-columns: repeat(`+p+", "+u+`px);
}`),n!==""&&(this._style=w("<style itchio-grid-sizer type='text/css'>"+n+"</style>").appendTo(w("head"))),d=this.size_callbacks,g=[],o=0,s=d.length;o<s;o++)e=d[o],g.push(e(this,u,a));return g},t}(),I.GameCells=function(){function t(e){this.setup_game_tools=ce(this.setup_game_tools,this),this.el=w(e),this.setup_game_tools(),this.setup_gifs()}return t.prototype.setup_game_tools=function(){return this.el.dispatch("click",{add_to_collection_btn:function(e){return function(r){return I.event("grid",I.page_name(),"add_to_collection"),I.current_user?Ot.open_remote(r.attr("href"),xe):"continue"}}(this)})},t.prototype.setup_gifs=function(){return this.el.on("mouseenter",".game_cell",function(e){return function(r){var n,i;if(n=w(r.currentTarget),!n.data("grid_hovered")&&(n.data("grid_hovered",!0),i=n.find(".gif_overlay"),!!i.length))return i.css("background-image","url("+i.data("gif")+")")}}(this))},t}(),I.GameGrid=function(){function t(e,r){var n,i,o,s,a;if(r==null&&(r={}),this.refresh_images=ce(this.refresh_images,this),this.add_image_loading=ce(this.add_image_loading,this),this.setup_conversion_tracking=ce(this.setup_conversion_tracking,this),this.el=w(e),w.extend(this,r),this.setup_lazy_images(),this.show_popups!==!1&&new Ht(this.el),new I.GameCells(this.el),!this.sizer&&this.sizer!==!1){for(n=["container_selector","expected_size","min_columns","cell_margin"],this.el[0]&&!this.el[0].id&&(this.el[0].id=Ze()),a={el:this.el,container_selector:"#"+this.el[0].id},o=0,s=n.length;o<s;o++)i=n[o],i in r&&(a[i]=r[i]);this.sizer=new I.GameGridSizer(a),this.sizer.on_size(function(u){return function(){return u.el.trigger("i:grid_resize"),u.el.lazy_images()}}(this))}}return t.prototype.setup_lazy_images=function(){return _.defer(function(e){return function(){return e.add_image_loading()}}(this))},t.prototype.setup_conversion_tracking=function(e){return this.el.on("i:impression",function(r){return function(n){var i,o;if(i=w(n.target).closest("[data-game_id]"),o=i.data("game_id"),!!o)return F.push("1:"+e+":1:"+o)}}(this)),this.el.on("i:delegate_tracking",function(r){return function(n,i){var o;if(o=w(n.target).closest("[data-game_id]").data("game_id"),!!o)return F.click(e+":1:"+o),i(F.flush_now())}}(this))},t.prototype.add_image_loading=function(){return this.el.lazy_images({show_item:function(e){return function(r){return r.trigger("i:impression"),r.find(".image_loading").addBack(".image_loading").removeClass("image_loading")}}(this)})},t.prototype.refresh_images=function(){var e;return typeof(e=this.el.data("lazy_images"))=="function"?e():void 0},t}();var nr=De(Pe()),et,V;V=null,et=function(t){var e,r,n,i,o,s,a,u,l,c,p,v,d,g,f,m,h,y,b,x,N,M,j,J,W;return b=ReactDOMFactories.table,M=ReactDOMFactories.thead,x=ReactDOMFactories.tbody,W=ReactDOMFactories.tr,N=ReactDOMFactories.td,e=ReactDOMFactories.abbr,n=ReactDOMFactories.details,y=ReactDOMFactories.summary,s=ReactDOMFactories.div,u=ReactDOMFactories.h2,r=ReactDOMFactories.code,v=ReactDOMFactories.pre,p=ReactDOMFactories.p,l=ReactDOMFactories.input,i=ReactDOMFactories.dialog,c=ReactDOMFactories.label,j=t.query_log.length,J=t.query_log.reduce(function(S,C){return S+C[1]},0),g=React.useState(t.query_log),d=g[0],h=g[1],f=React.useState(!1),a=f[0],m=f[1],o=React.useRef(null),React.useEffect(function(S){return function(){var C;return(C=o.current)!=null?C.showModal():void 0}}(this),[]),i({ref:o,className:"perf_query_log_widget",onClick:function(S){var C,T,D;C=(T=o.current)!=null?T.getBoundingClientRect():void 0,C&&(S.clientX<C.left||S.clientX>C.right||S.clientY<C.top||S.clientY>C.bottom)&&(D=o.current)!=null&&D.close()},style:{width:"100%",maxWidth:"800px"}},u({style:{margin:"0"}},"Query log"),p({style:{margin:"0"}},"Queries: ",r({},j),", Time: ",r({},(J*1e3).toFixed(2)+"ms")),s({style:{display:"flex",gap:"10px",alignItems:"center"}},l({type:"text",placeholder:"Filter queries...",style:{width:"auto",flex:"auto",borderSizinng:"border-box"},onChange:function(S){return function(C){var T;return T=C.target.value.toLowerCase().split(/\s+/),h(t.query_log.filter(function(D){var H,ie;return H=D[0],ie=H.toLowerCase(),T.every(function(Qt){return ie.includes(Qt)})}))}}(this)}),c({style:{display:"flex",alignItems:"center"}},"Slow",l({type:"checkbox",value:a,onChange:function(S){return function(C){return m(C.target.checked)}}(this)}))),b({className:"nice_table",style:{width:"100%"}},M({},W({},N({},"Query"),N({},"Timing"))),x({},d.filter(function(S){var C,T;return C=S[0],T=S[1],a?T>.01:!0}).map(function(S){return function(C,T){var D,H,ie;return D=C[0],ie=C[1],H=ie*1e3,W({key:T},N({},n({},y({},r({style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",maxWidth:"600px"}},D)),v({style:{whiteSpace:"pre-wrap"}},D))),N({},r({style:{fontWeight:H>10?"bold":void 0,color:H>100?"white":H>50?"red":void 0,backgroundColor:H>100?"red":void 0}},H.toFixed(2)+"ms")))}}(this)))))},I.PerfPanel=function(){function t(e){var r;e.layout_time||(e.layout_time=0),e.view_time||(e.view_time=0),e.db_time||(e.db_time=0),e.db_count||(e.db_count=0),r=_.template(`<div class="perf_panel">
  <div class="stat_row">
    <strong>Queries:</strong> {{ db_count }}
  </div>

  <div class="stat_row">
    <strong>Query time:</strong> {{ Math.floor(db_time * 1000) }}ms
  </div>

  <div class="stat_row">
    <strong>View time:</strong> {{ Math.floor((view_time + layout_time) * 1000) }}ms
  </div>

  <div class="stat_row">
    <strong>Rest:</strong> {{ Math.floor((total_time - (view_time + layout_time + db_time)) * 1000) }}ms
  </div>

</div>`),this.data=e,this.el=$(r(e)).appendTo(document.body),this.el.on("click",function(n){return function(){return n.render_queries()}}(this))}return t.prototype.render_queries=function(){var e,r,n;if(this.data.query_log)return r=function(){var i,o,s,a,u;for(s=this.data.query_log,u=[],i=0,o=s.length;i<o;i++)a=s[i],e=a[0],n=a[1],u.push({query:e,time:n*1e3});return u}.call(this),console.table(r),I.add_react().done(function(i){return function(){var o,s;return o=0,s=React.createElement(et,{query_log:i.data.query_log}),V||(V=document.createElement("div"),V.classList.add("perf_lightbox_container"),document.body.appendChild(V)),ReactDOM.render(null,V),ReactDOM.render(s,V)}}(this))},t}(),I.SaleList=function(){function t(e){this.el=$(e),this.el.lazy_images({})}return t}(),q(function(){var t,e,r,n,i,o,s;return r=O,o=r.p,n=r.div,i=r.label,e=R.package("Index"),s=PropTypes,t={years:["year","years"],months:["month","months"],days:["day","days"],hours:["hour","hours"],minutes:["minute","minutes"],seconds:["second","seconds"]},e("Countdown",{pure:!0,getDefaultProps:function(){return{max_blocks:4}},getInitialState:function(){return{time:new Date}},componentDidMount:function(){return this.interval=setInterval(function(a){return function(){return a.setState({time:new Date})}}(this),500)},componentWillUnmount:function(){return clearInterval(this.interval)},render:function(){var a,u,l,c,p,v;return c=["years","months","days","hours","minutes","seconds"],a=re.duration(_t(this.props.date)-this.state.time),l=a.asSeconds()<=0,u=!0,p=function(){var d,g,f;for(f=[],d=0,g=c.length;d<g;d++)o=c[d],v=a[o](),!(v===0&&u)&&(v>0&&(u=!1),f.push([o,v]));return f}(),p=p.slice(0,this.props.max_blocks),this.enclose({className:this.props.className},l?"The countdown has finished":p.map(function(d){return function(g){var f,m,h,y,b;return f=g[0],b=g[1],b?(h=t[f],y=h[0],m=h[1],n({className:"time_block",key:f},n({className:"block_value"},I.number_format(b))," ",n({className:"block_label"},b===1?y:m)," ")):null}}(this)))}})});var fe=null;q(function(){var t,e;return t=O,e=t.img,fe=P.component("LazyImage",{pure:!0,propTypes:{src:E.string,src_set:E.string,width:E.number,height:E.number},getInitialState:function(){return{visible:!1}},componentDidMount:function(){var r;return r=this.image_ref.current,this.unbind_lazy_images=$(r).lazy_images({elements:[r],show_images:function(n){return function(){var i;return n.setState({visible:!0}),typeof(i=n.props).on_reveal=="function"?i.on_reveal():void 0}}(this)})},componentWillUnmount:function(){return typeof this.unbind_lazy_images=="function"?this.unbind_lazy_images():void 0},render:function(){var r,n;return e({ref:this.image_ref||(this.image_ref=k.createRef()),className:L(this.props.class,this.props.className,{lazy_loaded:this.state.loaded,lazy_visible:this.state.visible}),alt:this.props.alt,width:this.state.loaded?this.props.width:(r=this.props.initial_width)!=null?r:this.props.width,height:this.state.loaded?this.props.height:(n=this.props.initial_height)!=null?n:this.props.height,src:this.state.visible?this.props.src:void 0,srcSet:this.state.visible?this.props.src_set:void 0,onLoad:this.state.visible&&!this.state.loaded?function(i){return function(){var o;return i.setState({loaded:!0}),typeof(o=i.props).on_load=="function"?o.on_load():void 0}}(this):void 0})}})});var de,K,ke,Ie,Ne,$e,X,tt,Re,he,Ce,ze,_e,rt,nt,Se,Yt=[].slice;he=function(t,e,r){return t<0?t+=1:t>1&&(t-=1),6*t<1?e+(r-e)*6*t:2*t<1?r:3*t<2?e+(r-e)*(2/3-t)*6:e},ke=function(t,e,r){var n,i,o,s,a;return t=t/360,e=e/100,r=r/100,e===0?(o=r,i=r,n=r):(a=r<.5?r*(1+e):r+e-r*e,s=2*r-a,o=he(t+1/3,s,a),i=he(t,s,a),n=he(t-1/3,s,a)),[o*255,i*255,n*255]},Ce=function(t,e,r){var n,i,o,s,a;return t=t/255,e=e/255,r=r/255,s=Math.min(t,e,r),o=Math.max(t,e,r),a=0,n=0,i=(s+o)/2,s!==o&&(a=i<.5?(o-s)/(o+s):(o-s)/(2-o-s),n=function(){switch(o){case t:return(e-r)/(o-s);case e:return 2+(r-t)/(o-s);case r:return 4+(t-e)/(o-s)}}()),n<0&&(n+=6),[n*60,a*100,i*100]},$e=function(){var t,e,r,n,i,o,s,a,u,l,c;if(l=arguments[0],a=2<=arguments.length?Yt.call(arguments,1):[],n="[a-fA-f0-9]",i=n+n,c="^#("+n+")("+n+")("+n+")$",u="^#("+i+")("+i+")("+i+")$",o=l.match(new RegExp(c)),o)t=o[0],s=o[1],r=o[2],e=o[3],s+=s,r+=r,e+=e;else{if(o=l.match(new RegExp(u)),!o)return null;t=o[0],s=o[1],r=o[2],e=o[3]}return[parseInt(s,16),parseInt(r,16),parseInt(e,16)]},X=function(){var t;return t=$e.apply(null,arguments),t||[0,0,0]},de=function(t){var e;return e=Math.floor(t).toString(16),e.length===1?"0"+e:e},K=function(t,e,r){return t=Math.min(255,Math.max(0,t)),e=Math.min(255,Math.max(0,e)),r=Math.min(255,Math.max(0,r)),"#"+de(t)+de(e)+de(r)},rt=function(t,e,r){var n,i,o,s,a;return e==null&&(e=15),r==null&&(r=.8),s=Ce.apply(null,X(t)),n=s[0],a=s[1],i=s[2],o=i>50?i-e:i+e,o=Math.max(0,Math.min(100,o)),K.apply(null,ke(n,a*r,o))},Ie=function(t,e,r){return(.299*t+.587*e+.114*r)/255},Re=function(t,e,r){return t=t/255,e=e/255,r=r/255,t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),r=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),.2126*t+.7152*e+.0722*r},ze=function(t,e,r){var n,i,o;return o=.299*t+.587*e+.114*r,n=(r-o)*.565,i=(t-o)*.713,[o,n,i]},Se=function(t,e,r){var n,i,o;return o=t+1.403*r,i=t-.344*e-.714*r,n=t+1.77*e,[o,i,n]},_e=function(t,e,r,n){var i,o,s,a;return n==null&&(n=.1),i=ze(t,e,r),a=i[0],o=i[1],s=i[2],n<0?a+=n*a:a+=n*(255-a),Se(a,o,s)},tt=function(t,e,r){var n,i;return typeof t=="string"&&(n=X(t),t=n[0],e=n[1],r=n[2]),i=Re(t,e,r),i>=.45?Ne(K(t,e,r),"#000000",.2):"#ffffff"},nt=function(t,e,r){var n,i,o,s,a;return e==null&&(e=.15),r==null&&(r=.5),a=X(t),s=a[0],i=a[1],n=a[2],o=Ie(s,i,n),o<r?K.apply(null,_e(s,i,n,e)):K.apply(null,_e(s,i,n,-e))},Ne=function(t,e,r){var n,i,o,s,a,u,l,c,p;return r===1?t:r===0?e:(c=X(t),u=c[0],s=c[1],i=c[2],p=X(e),l=p[0],a=p[1],o=p[2],n=1-r,K(u*r+l*n,s*r+a*n,i*r+o*n))};var Jt=z.Color||(z.Color={hsl_to_rgb:ke,rgb_to_hsl:Ce,parse_color:$e,parse_color_safe:X,hex_color:K,sub_color:rt,luma:Ie,relative_luma:Re,rgb_to_yuv:ze,yuv_to_rgb:Se,scale_luma:_e,readable_text_color:tt,sub_color2:nt,mix_color:Ne}),Me=null;q(function(){var t,e,r,n;return e=O,r=e.a,n=e.div,t=P.package("Index"),Me=t("GridSizer",{propTypes:{children:E.array},getInitialState:function(){return{}},getDefaultProps:function(){return{cell_margin:20,min_width:0,expected_width:315,min_columns:1,crop_on_resize:!0}},componentDidMount:function(){return _.defer(function(i){return function(){return i.calculate_cell_sizes()}}(this)),this.resize_callback=_.debounce(function(i){return function(){return i.calculate_cell_sizes()}}(this),250),$(window).on("resize",this.resize_callback)},componentWillUnmount:function(){return this.unmounted=!0,$(window).off("resize",this.resize_callback)},componentDidUpdate:function(i){if(i.children!==this.props.children)return _.defer(function(o){return function(){return o.calculate_cell_sizes()}}(this))},calculate_cell_sizes:function(i){var o,s,a,u,l,c;if(i==null&&(i=!1),!this.unmounted&&(s=this.get_width(),this.state.container_width!==s&&(c=this.props.expected_width+this.props.cell_margin,o=s+this.props.cell_margin,u=o/c,l=Math.ceil(u),l<this.props.min_columns&&(l=this.props.min_columns),a=o/l-this.props.cell_margin,a=Math.floor(a),a<this.props.min_width&&l>1&&(l-=1,a=o/l-this.props.cell_margin,a=Math.floor(a)),this.setState({container_width:s,cell_width:a,cells_per_row:l},this.props.on_reshape),i===!1)))return _.defer(function(p){return function(){return p.calculate_cell_sizes(!0)}}(this))},get_width:function(){var i,o,s,a,u;return i=this.container(),o=(u=i[0])!=null?u.getBoundingClientRect().width:void 0,a=o-Math.floor(o),s=Math.floor(i.width()),a>0&&(s-=1),s},get_max_num_visible:function(){if(this.props.fit_rows&&this.state.cells_per_row)return this.state.cells_per_row*this.props.fit_rows},get_num_visible:function(){var i;return i=this.props.children.length,this.props.fit_rows&&this.state.cells_per_row?Math.min(i,this.state.cells_per_row*this.props.fit_rows):i},get_visible_children:function(){var i;return i=this.props.children,this.props.fit_rows&&this.state.cells_per_row&&(i=i.slice(0,this.state.cells_per_row*this.props.fit_rows)),i},render:function(){var i,o,s,a,u,l;return i=this.get_visible_children(),u={display:"grid",alignItems:"start",gap:this.props.cell_margin+"px"},o=this.props.crop_on_resize?{overflowX:"hidden"}:void 0,this.props.crop_on_resize&&this.state.container_width&&(u.width=this.state.container_width+"px"),l=this.state.cell_width&&this.state.cells_per_row?u.gridTemplateColumns="repeat("+this.state.cells_per_row+", "+this.state.cell_width+"px)":(a=window.innerWidth<400?5/9:7/9,s=Math.floor(this.props.expected_width*a),u.gridTemplateColumns="repeat(auto-fill, minmax("+s+"px, 1fr))"),this.enclose({component:this.props.component,style:o},React.createElement(this.props.sizer_component||"div",{className:"grid_sizer_children",style:u},i))}})});var je=[].slice,Vt=null,Kt=null;q(function(){var t,e,r,n,i,o,s,a,u,l,c,p,v;return n=O,v=n.span,s=n.div,i=n.a,l=n.label,c=n.p,o=n.button,a=n.fragment,p=n.section,u=n.h2,a=k.createElement.bind(null,k.Fragment),a.type=k.fragment,t=P.package("Index"),e={linux:"tux",osx:"apple",windows:"windows8",android:"android"},r={linux:"Linux",osx:"macOS",windows:"Windows",android:"Android"},t("PlatformList",{pure:!0,getDefaultProps:function(){return{prefix:"Available for"}},render:function(){var d,g,f,m,h;if(!(this.props.platforms&&this.props.platforms.length))return null;for(m=[],h=this.props.platforms,d=0,g=h.length;d<g;d++)f=h[d],m.length>0&&m.push(" "),m.push(v({key:f,className:"icon icon-"+e[f],"aria-hidden":"true",title:this.props.prefix+" "+r[f]}));return m}}),t("StarRating",{propTypes:{average:E.number,count:E.number},pure:!0,render:function(){var d,g;return d=this.props.average||0,s({className:"game_rating",title:"Average: "+d.toFixed(2)},v({className:"screenreader_only"},"Average rating "+d.toFixed(2)+" out of 5"),s({className:"star_value"},s({className:"star_fill",style:{width:(d/5*100).toFixed(5)+"%"}},function(){var f,m;for(m=[],g=f=1;f<=5;g=++f)m.push(v({key:g,className:"star icon-star","aria-hidden":"true"}));return m}()),s({className:"star_holes"},function(){var f,m;for(m=[],g=f=1;f<=5;g=++f)m.push(v({key:g,className:"star icon-star2","aria-hidden":"true"}));return m}()))," ",v({className:"rating_count"},"("+I.format_integer(this.props.count),v({className:"screenreader_only"}," total ratings"),")"))}}),Kt=t("GameCell",{pure:!0,getDefaultProps:function(){return{show_price:!0,show_short_text:!0,show_platforms:!0,show_rating:!0,show_cell_tools:!0}},getInitialState:function(){return{game:this.build_game()}},componentDidUpdate:function(d){if(d.build_game_object!==this.props.build_game_object||d.game!==this.props.game)return this.setState({game:this.build_game()})},update_focus:function(d){return this.setState({cell_tools_focused:d.currentTarget.contains(document.activeElement)})},build_game:function(){return this.props.build_game_object?this.props.build_game_object(this.props.game):this.props.game},add_to_collection:function(d){if(I.current_user)return d.preventDefault(),le.open_remote("/game/collections/"+this.state.game.id,xe)},mark_gif_loaded:function(){return this.setState({gif_loaded:!0})},track_grid_referrer:function(){if(this.props.grid_referrer)return ne.push("game",this.state.game.id,this.props.grid_referrer)},game_link:function(){var d,g,f;return f=arguments[0],d=2<=arguments.length?je.call(arguments,1):[],this.props.conversion_source?(g=$.extend({object_type:1,object_id:this.state.game.id,source:this.props.conversion_source,on_click:this.props.grid_referrer?this.track_grid_referrer:void 0},f),Z.apply(null,[g].concat(je.call(d)))):i.apply(null,[f].concat(je.call(d)))},render_user:function(d,g){return g==null&&(g=null),i({key:g,className:"user_link",href:d.url,target:this.props.target},d.name)},render:function(){var d,g,f,m,h,y,b,x,N,M,j,J,W;return b=this.state.game,W=b.user,N=b.platforms?function(){var S,C,T,D;for(T=b.platforms,D=[],S=0,C=T.length;S<C;S++)x=T[S],e[x]&&D.push(x);return D}():void 0,h=b.cover_color?(j=Jt.parse_color(b.cover_color),M=j[0],y=j[1],d=j[2],"rgba("+M+", "+y+", "+d+", 0.5)"):void 0,this.enclose({"data-game_id":b.id,dir:"auto",className:L("game_cell",{focused:this.state.cell_tools_focused}),onMouseEnter:this.state.game.gif_cover?function(S){return function(){return S.setState({hovering:!0})}}(this):void 0,onMouseLeave:this.state.game.gif_cover?function(S){return function(){return S.setState({hovering:!1})}}(this):void 0},s({className:"bordered",style:h&&{backgroundColor:h}},this.game_link({href:b.url,target:this.props.target,className:"game_thumb","aria-hidden":"true",tabIndex:-1},typeof(g=this.props).render_thumb_extras=="function"?g.render_thumb_extras(b):void 0,b.cover?fe({src:b.cover}):s({className:"missing_image"},"no image :("),b.gif_cover?s({className:"gif_label"},"GIF"):void 0,(J=this.state)!=null&&J.hovering&&b.gif_cover?k.createElement(k.Fragment,{},this.state.gif_loaded?void 0:s({className:"gif_loading_overlay"}),fe({className:"gif_cover",src:b.gif_cover,on_load:this.mark_gif_loaded})):void 0),this.props.show_price&&b.sale_rate?s({className:L("sale_flag",{reverse_sale:b.sale_rate<0})},s({className:"rate"},Math.abs(b.sale_rate)+"%"),s({className:"mini_label"},b.sale_rate<0?"more":"off")):void 0,N!=null&&N.length?s({className:"p_data fading_data"},t.PlatformList({platforms:N})):void 0,this.props.show_cell_tools?s({className:"fading_data cell_tools",onFocus:this.update_focus,onBlur:this.update_focus},typeof(f=this.props).render_cell_extras=="function"?f.render_cell_extras(b):void 0,i({href:b.url+"/add-to-collection",title:this.t("add_to_collection.add_button"),className:"add_to_collection_btn",onClick:this.add_to_collection,role:"button",onKeyDown:function(S){return function(C){if(C.key===" ")return S.add_to_collection(C)}}(this)},v({className:"icon icon-playlist_add","aria-hidden":"true"}),v({className:"screenreader_only"},"Add to collection"))):void 0),s({className:"label"},function(){if(this.props.show_price)switch(b.flag){case"free":return s({className:"meta_tag free_tag"},"Free");case"web":return s({className:"meta_tag free_tag"},"Web");case"demo":return s({className:"meta_tag demo_tag"},"Demo");default:if(b.price)return s({className:L("price_tag meta_tag")},b.price)}}.call(this),this.game_link({target:this.props.target,className:"title",title:b.title,href:b.url},b.title)),s({className:"user_row"},b.contributors?b.contributors.map(function(S){return function(C,T){return T>0?a({key:"user-"+T},", ",S.render_user(C)):S.render_user(C,"user-"+T)}}(this)):this.render_user(W)),this.props.show_rating&&b.rating?t.StarRating(b.rating):void 0,b.tags&&b.tags.length?s({className:"sub cell_tags"},b.tags.map(function(S){return function(C,T){return k.createElement(k.Fragment,{key:C.name},T>0?", ":void 0,i({href:C.url,target:S.props.target},"#"+C.name))}}(this))):void 0,this.props.show_short_text&&b.short_text?s({className:"sub short_text"},b.short_text):void 0,typeof(m=this.props).render_cell_below=="function"?m.render_cell_below(b):void 0)}}),Vt=t("GameGrid",{calculate_cell_sizes:function(d){return function(){var g,f;return(g=d.grid_sizer_ref)!=null&&(f=g.current)!=null?f.calculate_cell_sizes():void 0}}(this),componentDidMount:function(){var d;if(d=this.container(),this.props.enable_popups)return new I.GamePopups(d,{x_offset:10})},getDefaultProps:function(){return{cell_width:I.is_mobile()?300:250,enable_popups:!0,render_game:function(d){var g;return g={render_thumb_extras:this.props.render_thumb_extras,render_cell_extras:this.props.render_cell_extras,render_cell_below:this.props.render_cell_below,key:d.id,game:d,build_game_object:this.props.build_game_object,conversion_source:this.props.conversion_source,grid_referrer:this.props.grid_referrer},this.props.cell_props&&(g=$.extend(g,this.props.cell_props)),t.GameCell(g)}}},render:function(){var d,g;return d={ref:this.grid_sizer_ref||(this.grid_sizer_ref=k.createRef()),cell_margin:10,expected_width:this.props.cell_width,fit_rows:this.props.fit_rows,children:(g=this.props.games)!=null?g.map(this.props.render_game.bind(this)):void 0},this.props.grid_sizer_props&&(d=$.extend(d,this.props.grid_sizer_props)),this.enclose({},Me(d))}}),t("NewFromFollowers",{getInitialState:function(){return{games:this.props.games}},componentDidUpdate:function(d,g){var f,m;if(((f=g.games)!=null?f.length:void 0)!==((m=this.state.games)!=null?m.length:void 0))return $(window).trigger("i:reshape")},on_dismiss_games:function(d){var g,f,m,h,y,b,x;if(!((m=this.state)!=null&&m.loading)&&(f=(h=this.game_grid_ref)!=null&&(y=h.current)!=null&&(b=y.grid_sizer_ref)!=null?b.current:void 0,!!f&&(x=this.state.games.slice(0,f.get_num_visible()),!!x.length)))return this.setState({loading:!0}),$.post(this.props.dismiss_url,I.with_csrf({object_type:"game",object_id:function(){var N,M,j;for(j=[],N=0,M=x.length;N<M;N++)g=x[N],j.push(g.id);return j}().join(",")})).done(function(N){return function(M){return $.get(N.props.more_results_url).done(function(j){return N.setState({games:_.toArray(j.games),loading:!1})})}}(this))},render_cell_extras:function(d){return o({type:"button",className:"dismiss_btn",onClick:function(g){return function(){var f,m;return m=function(){var h,y,b,x;for(b=this.state.games,x=[],h=0,y=b.length;h<y;h++)f=b[h],f!==d&&x.push(f);return x}.call(g),g.setState({games:m}),$.post(g.props.dismiss_url,I.with_csrf({object_type:"game",object_id:d.id})).done(function(h){return g.fetch_more_if_necessary()})}}(this)},"Dismiss")},fetch_more_if_necessary:function(){var d,g,f,m;if(!this.state.loading&&!this.state.exhausted&&(d=(g=this.game_grid_ref)!=null&&(f=g.current)!=null&&(m=f.grid_sizer_ref)!=null?m.current:void 0,!!d&&d.get_max_num_visible()>d.get_num_visible()))return this.setState({loading:!0}),$.get(this.props.more_results_url).done(function(h){return function(y){return y=_.toArray(y!=null?y.games:void 0),h.setState({exhausted:y.length<d.get_max_num_visible(),games:y,loading:!1})}}(this))},render_dismiss_button:function(){var d;if(d=this.state.games,!!d.length)return o({className:"button outline",type:"button",onClick:this.on_dismiss_games},this.state.games.length>1?"Dismiss these":"Dismiss")},render:function(){var d;return this.state.games.length?this.enclose({component:"section",className:L("game_section",{loading:(d=this.state)!=null?d.loading:void 0})},s({className:"header_split"},s({},s({className:"section_header"},u({},"New From Those You Follow")),c({className:"section_description"},"Projects from those you follow that you haven't seen yet.")),this.render_dismiss_button()),t.GameGrid({ref:this.game_grid_ref||(this.game_grid_ref=k.createRef()),games:this.state.games,fit_rows:this.props.fit_rows,conversion_source:this.props.conversion_source,grid_referrer:this.props.grid_referrer,render_cell_extras:this.render_cell_extras})):null}})}),q(function(){var t,e,r,n,i,o,s,a;return e=O,o=e.li,i=e.div,r=e.a,n=e.button,a=e.ul,s=e.p,t=P.package("Index"),t("UserFollowCell",{pure:!0,propTypes:{user:E.object.isRequired},getInitialState:function(){return{}},render:function(){var u;return u=this.props.user,o({key:u.id,className:classNames("user_cell")},i({className:"user_info"},r({className:"user_avatar",href:u.url,target:"_blank"},u.avatar_url?fe({src:u.avatar_url,srcSet:u.avatar_url+" 1x, "+u.avatar_url2x+" 2x",width:35,height:35}):void 0),i({},r({target:"_blank",href:u.url,className:"user_name"},u.name),i({className:"cell_tools"},P.FollowButton({show_name:!1,user_id:u.id,follow_url:u.follow_url,unfollow_url:u.unfollow_url,follow_data:{source:"home_suggested"},on_follow_change:function(l){return function(c){var p;return typeof(p=l.props).follow_user=="function"&&p.follow_user(u,c),l.setState({following:c})}}(this)}),n({type:"button",style:{visibility:this.state.following?"hidden":void 0},className:"textlike dismiss_button","data-tooltip":this.t("index.to_follow.dismiss_tooltip"),onClick:this.dismiss_callback||(this.dismiss_callback=function(l){return function(){var c;return l.container().trigger("i:clear_tooltips"),typeof(c=l.props).dismiss_user=="function"?c.dismiss_user(u):void 0}}(this))},this.tt("misc.dismiss"))),u.games?i({className:"created"},this.tt("index.to_follow.created_projects",{project_list:a({className:"created_list"},u.games.map(function(l){return function(c){return o({key:c.id},r({href:c.url,"data-game_id":c.id,target:"_blank"},c.title))}}(this)))})):void 0)))}}),t("UsersToFollow",{propTypes:{users:E.array},getInitialState:function(){return{users:this.props.users,followed_count:0,followed_users:{}}},componentDidMount:function(){return new I.GamePopups(this.container(),{trigger_selector:"[data-game_id]",x_offset:10})},refresh_users:function(){if(!this.state.loading)return this.setState({loading:!0}),$.getJSON(this.props.more_users_url,function(u){return function(l){var c,p,v,d,g,f,m,h;for(u.setState({loading:!1}),h=function(){var y,b,x,N;for(x=this.state.users,N=[],y=0,b=x.length;y<b;y++)m=x[y],this.state.followed_users[m.id]||N.push(m);return N}.call(u),c={},p=0,d=h.length;p<d;p++)m=h[p],c[m.id]=!0;if(l.users)for(f=l.users,v=0,g=f.length;v<g;v++)m=f[v],!c[m.id]&&h.push(m);return u.setState({users:_.shuffle(h),followed_count:0,followed_users:{}})}}(this))},increment_follow:function(u,l){var c;return c={},c[u.id]=l||!1,this.setState({followed_count:this.state.followed_count+(l?1:-1),followed_users:$.extend(this.state.followed_users,c)})},dismiss_user:function(u){var l;return $.post(u.dismiss_url,I.with_csrf(),function(c){return function(){if(c.state.users.length<10)return c.refresh_users()}}(this)),this.setState({users:function(){var c,p,v,d;for(v=this.state.users,d=[],c=0,p=v.length;c<p;c++)l=v[c],l!==u&&d.push(l);return d}.call(this)})},render:function(){return this.state.users?this.enclose({},this.state.users&&this.state.users.length?Me({sizer_component:"ul",expected_width:250,min_width:200,fit_rows:I.is_mobile()?3:1,children:this.state.users.map(function(u){return function(l){return t.UserFollowCell({key:l.id,user:l,dismiss_user:u.dismiss_user,follow_user:u.increment_follow})}}(this))}):s({className:"empty_message"},this.tt("index.to_follow.empty_results")),this.state.followed_count>0&&this.state.users&&this.state.users.length?i({className:"refresh_users"},n({type:"button",disabled:this.state.loading||!1,className:classNames("textlike",{disabled:this.state.loading}),onClick:function(u){return function(l){return u.refresh_users()}}(this)},this.tt("index.to_follow.refresh_button"))):void 0):null}})}),q(function(){var t,e,r,n,i,o,s;return t=O,r=t.button,o=t.span,n=t.img,e=t.a,i=t.label,s=PropTypes,R("FollowButton",{propTypes:{following:s.bool,show_name:s.bool,name:s.string,login_url:s.string,user_id:s.number,follow_data:s.object,follow_url:s.string.isRequired,unfollow_url:s.string.isRequired},getInitialState:function(){return{following:this.props.following}},getDefaultProps:function(){return{show_name:!0}},componentDidUpdate:function(a,u){if(!u.animate_class&&this.state.animate_class)return this.timer&&(window.clearTimeout(this.timer),delete this.timer),this.timer=setTimeout(function(l){return function(){return l.setState({animate_class:null})}}(this),500)},componentWillUnmount:function(){if(this.timer)return window.clearTimeout(this.timer),delete this.timer},render:function(){var a;return a=this.state.following?this.state.hovering?this.props.show_name?this.tt("misc.follow_button.unfollow_username",{username:this.props.name}):this.tt("misc.follow_button.unfollow"):React.createElement(React.Fragment,{},o({className:"icon icon-checkmark","aria-hidden":!0,role:"img"}),this.props.show_name?this.tt("misc.follow_button.following_username",{username:this.props.name}):this.tt("misc.follow_button.following")):React.createElement(React.Fragment,{},o({className:"icon icon-plus","aria-hidden":!0,role:"img"}),this.props.show_name?this.tt("misc.follow_button.follow_username",{username:this.props.name}):this.tt("misc.follow_button.follow")),this.enclose({component:this.props.login_url?"a":"button",href:this.props.login_url,"data-label":"follow_btn",className:classNames("button",{is_following:this.state.following,disabled:this.state.loading},this.state.animate_class,this.props.className),onMouseEnter:function(u){return function(){return u.setState({hovering:!0})}}(this),onMouseLeave:function(u){return function(){return u.setState({hovering:!1})}}(this),target:this.props.target,onClick:function(u){return function(l){var c,p;if(!u.props.login_url&&!u.state.loading)return l.preventDefault(),c=$(l.target),u.setState({loading:!0,animate_class:null}),u.container().trigger("i:track_link"),p=u.state.following?u.props.unfollow_url:u.props.follow_url,$.post(p,I.with_csrf(u.props.follow_data),function(v){if(v.errors){I.flash(v.errors.join(", ")),u.setState({loading:!1});return}return c.trigger("i:follow_updated",[{user_id:u.props.user_id,following:v.following,btn:c}]),u.setState({following:v.following,animate_class:v.following?"animate_bounce":"animate_drop_down",loading:!1},function(){var d;return typeof(d=u.props).on_follow_change=="function"?d.on_follow_change(u.state.following):void 0})})}}(this)},a)}})});var pe=null;q(function(){var t,e;return t=O,e=t.img,pe=function(r){var n,i,o,s,a;return r==null&&(r={}),a=(i=r.width)!=null?i:24,n=(o=r.height)!=null?o:a,k.createElement("svg",{className:"svgicon icon_close",strokeLinecap:"round",stroke:"currentColor",role:"img",version:"1.1",viewBox:"0 0 24 24",strokeWidth:(s=r.stroke_width)!=null?s:"2",width:a,height:n,strokeLinejoin:"round","aria-hidden":!0,fill:"none"},k.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),k.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},pe=k.createElement.bind(null,k.memo(pe))});var it=null,ot=null,Xt=null;q(function(){var t,e,r,n,i,o,s,a;return t=O,e=t.a,i=t.div,r=t.button,s=t.label,o=t.h2,a=t.p,n=null,Xt=function(u){return u.promise?(I.Lightbox.open_loading(),u.then(function(l){return function(c){return I.Lightbox.open(c)}}(this),function(l){return function(c){return I.Lightbox.open(ot({errors:c.errors}))}}(this))):I.Lightbox.open(u)},it=P.component("Lightbox",{is_modal_dialog:function(){var u;return u=document.getElementById("lightbox_container"),u!=null?u.contains(this.container_ref.current):void 0},getInitialState:function(){return{}},componentDidMount:function(){if(this.is_modal_dialog())return n?console.warn("A dialog already has the focus trap"):(this.detect_focus=function(u){return function(l){var c;if(c=u.container_ref.current,c&&"contains"in c&&!(c===l.target||c.contains(l.target)))return c.focus()}}(this),$(document.body).on("focusin",this.detect_focus),n=this),this.setState({previously_focused:document.activeElement,is_modal_dialog:!0},function(){return _.defer(function(u){return function(){var l;return(l=u.container_ref.current)!=null?l.focus():void 0}}(this))})},componentWillUnmount:function(){var u;return this.detect_focus&&($(document.body).off("focusin",this.detect_focus),n=null,delete this.detect_focus),(u=this.state.previously_focused)!=null?u.focus():void 0},close:function(){return I.Lightbox.close()},render:function(){return i({className:classNames("lightbox",this.props.className),style:this.props.style,role:this.state.is_modal_dialog?"dialog":void 0,"aria-modal":this.state.is_modal_dialog?"true":void 0,tabIndex:this.state.is_modal_dialog?-1:void 0,ref:this.container_ref||(this.container_ref=React.createRef())},this.props.close!==!1?r({className:"close_button",type:"button","aria-label":"Close Dialog"},pe({width:18})):void 0,this.props.children)}}),ot=P.component("ErrorLightbox",{propTypes:{title:E.string,errors:E.array.isRequired},render:function(){return it({className:classNames(this.enclosing_class_name(),"compact")},o({},this.props.title||this.tt("misc.lightboxes.error_title")),P.Forms.FormErrors({title:!1,errors:this.props.errors}),a({className:"buttons"},r({className:"button",type:"button",onClick:function(u){return function(){return I.Lightbox.close()}}(this)},"Close")))}})})})();
